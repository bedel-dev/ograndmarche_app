{"version":3,"sources":["webpack:///node_modules/ev-emitter/ev-emitter.js","webpack:///node_modules/ng-masonry-grid/ng-masonry-grid.umd.js","webpack:///node_modules/outlayer/outlayer.js","webpack:///node_modules/outlayer/item.js","webpack:///node_modules/get-size/get-size.js","webpack:///node_modules/fizzy-ui-utils/utils.js","webpack:///node_modules/masonry-layout/masonry.js","webpack:///node_modules/imagesloaded/imagesloaded.js","webpack:///node_modules/desandro-matches-selector/matches-selector.js"],"names":["global","factory","window","EvEmitter","proto","prototype","on","eventName","listener","events","_events","listeners","indexOf","push","once","onceEvents","_onceEvents","onceListeners","off","length","index","splice","emitEvent","args","slice","i","isOnce","apply","allOff","exports","ɵngcc0","ɵngcc1","core","common","rxjs","_c0","_c1","NgMasonryGridService","_platformId","items","itemsCount","itemsRenderedCount","isAnimate","docElem","document","documentElement","animationDefaults","animationEffect","minDuration","maxDuration","viewportFactor","masonryDefaults","itemSelector","initLayout","addStatus","_onScrollHandler","_onScrollFn","bind","_onResizeHandler","_resizeHandler","getViewportH","client","inner","scrollY","pageYOffset","scrollTop","getOffset","el","offsetTop","offsetLeft","isNaN","offsetParent","top","left","inViewport","h","elH","offsetHeight","scrolled","viewed","elTop","elBottom","extend","a","b","key","hasOwnProperty","init","masonryOptions","useAnimation","animationOptions","useImagesLoaded","_init","initializeMasonry","_element","options","Masonry","classList","add","imagesLoaded","isPlatformBrowser","_initMasonry","_this","_msnry","addEventListener","Array","call","children","forEach","element","remove","layout","self","didScroll","setTimeout","_scrollPage","map","item","perspY","style","WebkitPerspectiveOrigin","MozPerspectiveOrigin","perspectiveOrigin","randDuration","Math","random","WebkitAnimationDuration","MozAnimationDuration","animationDuration","delayed","resizeTimeout","clearTimeout","_checkTotalRendered","removeEventListener","onDestory","removeAnimation","toLowerCase","gutter","marginBottom","hasChildNodes","contains","removeChild","instance","insertBefore","appendChild","prepended","appended","addItems","addOrderItem","reorderMasonryItems","reorderItems_1","sort","dataset","count","lastChild","reloadItems","setAddStatus","value","removeItem","obsv","Observable","create","observer","getAttribute","findIndex","masonryItem","elem","_onTransitionEnd","indx","empty","removeFirstItem","removeAllItems","addTransition","transitionEnd","next","transitionDuration","transition","transform","opacity","transitionEnd_1","isindex","ctorParameters","type","undefined","decorators","Inject","PLATFORM_ID","ɵfac","NgMasonryGridService_Factory","t","ɵɵinject","ɵprov","ɵɵdefineInjectable","token","ɵsetClassMetadata","Injectable","NgMasonryGridComponent","masonryGridService","layoutComplete","EventEmitter","removeComplete","onNgMasonryInit","ngOnInit","nativeElement","ngAfterContentInit","ngOnDestroy","destroy","scrollAnimationOptions","emit","reOrderItems","ElementRef","propDecorators","Input","Output","NgMasonryGridComponent_Factory","ɵɵdirectiveInject","ɵcmp","ɵɵdefineComponent","selectors","inputs","outputs","attrs","ngContentSelectors","decls","vars","template","NgMasonryGridComponent_Template","rf","ctx","ɵɵprojectionDef","ɵɵprojection","styles","Component","selector","NgMasonryGridDirective","_parent","platformId","ngAfterViewInit","setAttribute","watchForHtmlChanges","MutationObserver","WebKitMutationObserver","self_1","mutations","observerFromElement","observe","subtree","childList","forwardRef","NgMasonryGridDirective_Factory","ɵdir","ɵɵdefineDirective","Directive","NgMasonryGridModule","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","NgMasonryGridModule_Factory","providers","imports","CommonModule","ngJitMode","ɵɵsetNgModuleScope","declarations","NgModule","MasonryGridItem","Object","defineProperty","getSize","utils","Item","console","jQuery","noop","GUID","instances","Outlayer","queryElement","getQueryElement","error","constructor","namespace","$element","defaults","option","id","outlayerGUID","_create","isInitLayout","_getOption","containerStyle","position","originLeft","originTop","resize","resizeContainer","hiddenStyle","visibleStyle","opts","oldOption","compatOptions","horizontal","layoutInstant","stamps","stamp","canBindResize","bindResize","_itemize","elems","itemElems","_filterFindItemElements","filterFindElements","getItemElements","_resetLayout","_manageStamps","isInstant","_isLayoutInited","layoutItems","size","_getMeasurement","measurement","querySelector","HTMLElement","_getItemsForLayout","_layoutItems","_postLayout","filter","isIgnored","_emitCompleteOnItems","queue","_getItemLayoutPosition","isLayoutInstant","_processLayoutQueue","x","y","updateStagger","obj","_positionItem","stagger","getMilliseconds","goTo","moveTo","isResizingContainer","_getContainerSize","_setContainerMeasure","width","height","measure","isWidth","elemSize","isBorderBox","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","paddingBottom","paddingTop","borderTopWidth","borderBottomWidth","max","onComplete","dispatchEvent","doneCount","tick","event","emitArgs","concat","$event","Event","trigger","ignore","getItem","unignore","_find","unstamp","removeFrom","querySelectorAll","makeArray","_getBoundingRect","_manageStamp","boundingRect","getBoundingClientRect","_boundingRect","right","bottom","_getElementOffset","thisRect","offset","marginLeft","marginTop","marginRight","handleEvent","isResizeBound","unbindResize","onresize","debounceMethod","needsResizeLayout","hasSizes","innerWidth","reveal","previousItems","hide","revealItemElements","getItems","hideItemElements","removeItems","removeData","data","Layout","subclass","htmlInit","bridget","Parent","SubClass","arguments","msUnits","ms","s","time","matches","match","num","unit","parseFloat","mult","isEmptyObj","prop","docElemStyle","transitionProperty","transformProperty","transitionEndEvent","WebkitTransition","vendorProperties","transitionDelay","_transn","ingProperties","clean","onEnd","css","method","elemStyle","supportedProp","getPosition","getComputedStyle","isOriginLeft","isOriginTop","xValue","yValue","layoutSize","layoutPosition","xPadding","xProperty","xResetProperty","getXValue","yPadding","yProperty","yResetProperty","getYValue","isHorizontal","percentPosition","_transitionTo","curX","curY","didNotMove","setPosition","isTransitioning","transX","transY","transitionStyle","getTranslate","to","onTransitionEnd","isCleaning","_nonTransition","_removeStyles","_transition","from","enableTransition","toDashedAll","str","replace","$1","transitionProps","duration","staggerDelay","onwebkitTransitionEnd","ontransitionend","onotransitionend","dashedVendorProperties","target","propertyName","disableTransition","removeTransitionStyles","cleanStyle","cleanTransitionStyle","delay","removeElem","parentNode","display","isHidden","transitionEndProperty","getHideRevealTransitionEndProperty","onRevealTransitionEnd","styleProperty","optionStyle","onHideTransitionEnd","getStyleSize","isValid","logError","message","measurements","measurementsLength","getZeroSize","innerHeight","outerWidth","outerHeight","getStyle","isSetup","isBoxSizeOuter","setup","div","createElement","padding","borderStyle","borderWidth","boxSizing","body","round","nodeType","offsetWidth","paddingWidth","paddingHeight","marginWidth","marginHeight","borderHeight","isBorderBoxSizeOuter","styleWidth","styleHeight","matchesSelector","modulo","arraySlice","isArray","isArrayLike","ary","getParent","ffElems","childElems","_class","methodName","threshold","timeoutName","timeout","docReady","callback","readyState","toDashed","$2","WidgetClass","dashedNamespace","dataAttr","dataAttrElems","jsDashElems","dataOptionsAttr","attr","JSON","parse","className","fitWidth","measureColumns","colYs","cols","maxY","horizontalColIndex","getContainerWidth","columnWidth","firstItem","firstItemElem","containerWidth","excess","mathMethod","isFitWidth","container","remainder","colSpan","min","colPosMethod","horizontalOrder","colPosition","col","setHeight","setMax","_getTopColPosition","colGroup","_getTopColGroup","minimumY","groupCount","_getColGroupY","groupColYs","_getHorizontalColPosition","isOver","hasSize","stampSize","firstX","lastX","firstCol","floor","lastCol","stampMaxY","_getContainerFitWidth","unusedCols","previousWidth","$","ImagesLoaded","onAlways","queryElem","elements","getImages","jqDeferred","Deferred","check","images","addElementImages","nodeName","addImage","background","addElementBackgroundImages","elementNodeTypes","childImgs","img","child","reURL","exec","backgroundImage","url","addBackground","loadingImage","LoadingImage","Background","progressedCount","hasAnyBroken","complete","onProgress","image","progress","isLoaded","notify","debug","log","isComplete","jqMethod","getIsImageComplete","confirm","naturalWidth","proxyImage","Image","src","onload","unbindEvents","onerror","makeJQueryPlugin","fn","promise","matchesMethod","ElemProto","Element","prefixes","prefix"],"mappings":"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","file":"default~components-pages-blogmasonry-blogmasonry-module-ngfactory~components-pages-commande-commande~cf23030b-es5.js","sourcesContent":["/**\n * EvEmitter v1.1.0\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n( function( global, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, window */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( typeof window != 'undefined' ? window : this, function() {\n\n\"use strict\";\n\nfunction EvEmitter() {}\n\nvar proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // set events hash\n  var events = this._events = this._events || {};\n  // set listeners array\n  var listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( listeners.indexOf( listener ) == -1 ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  var onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners object\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  // copy over to avoid interference if .off() in listener\n  listeners = listeners.slice(0);\n  args = args || [];\n  // once stuff\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  for ( var i=0; i < listeners.length; i++ ) {\n    var listener = listeners[i]\n    var isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n  }\n\n  return this;\n};\n\nproto.allOff = function() {\n  delete this._events;\n  delete this._onceEvents;\n};\n\nreturn EvEmitter;\n\n}));\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(require('@angular/core'),require('@angular/common'),exports, require('@angular/core'), require('@angular/common'), require('rxjs')) :\n\ttypeof define === 'function' && define.amd ? define(['@angular/core','@angular/common','exports', '@angular/core', '@angular/common', 'rxjs'], factory) :\n\t(factory(global.ng.core,global.ng.common,(global['ng-masonry-grid'] = {}),global.core,global.common,global.rxjs));\n}(this, (function (ɵngcc0,ɵngcc1,exports,core,common,rxjs) { \nvar _c0 = [\"ng-masonry-grid\", \"\"];\nvar _c1 = [\"*\"];\n'use strict';\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\r\n */\r\n/**\r\n * Shailendra Kumar <shailu.snist@gmail.com>\r\n * @ignore\r\n */\r\nvar NgMasonryGridService = /** @class */ (function () {\r\n    function NgMasonryGridService(_platformId) {\r\n        this._platformId = _platformId;\r\n        this.items = [];\r\n        this.itemsCount = 0;\r\n        this.itemsRenderedCount = 0;\r\n        this.isAnimate = false;\r\n        this.docElem = window.document.documentElement;\r\n        /**\r\n         * Default animation options of grid items on scroll\r\n         */\r\n        this.animationDefaults = {\r\n            animationEffect: 'effect-1',\r\n            // default animation effect-1\r\n            // Minimum and a maximum duration of the animation (random value is chosen)\r\n            minDuration: 0,\r\n            maxDuration: 0,\r\n            // The viewportFactor defines how much of the appearing item has to be visible in order to trigger the animation\r\n            // if we'd use a value of 0, this would mean that it would add the animation class as soon as the item is in the viewport.\r\n            // If we were to use the value of 1, the animation would only be triggered when we see all of the item in the viewport (100% of it)\r\n            viewportFactor: 0\r\n        };\r\n        /**\r\n         * Default masonry options\r\n         */\r\n        this.masonryDefaults = {\r\n            // Set default itemSelector: mandatory\r\n            itemSelector: '[ng-masonry-grid-item], ng-masonry-grid-item, [ng-masonry-grid-item].animate, ng-masonry-grid-item.animate',\r\n            initLayout: false,\r\n            addStatus: 'append' // 'prepend' or 'add' or 'reorder'\r\n        };\r\n        this._onScrollHandler = this._onScrollFn.bind(this);\r\n        this._onResizeHandler = this._resizeHandler.bind(this);\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.getViewportH = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        /** @type {?} */\r\n        var client = this.docElem['clientHeight'];\r\n        /** @type {?} */\r\n        var inner = window['innerHeight'];\r\n        if (client < inner) {\r\n            return inner;\r\n        }\r\n        else {\r\n            return client;\r\n        }\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.scrollY = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return window.pageYOffset || this.docElem.scrollTop;\r\n    };\r\n    /**\r\n     * @param {?} el\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.getOffset = /**\r\n     * @param {?} el\r\n     * @return {?}\r\n     */\r\n    function (el) {\r\n        /** @type {?} */\r\n        var offsetTop = 0;\r\n        /** @type {?} */\r\n        var offsetLeft = 0;\r\n        do {\r\n            if (!isNaN(el.offsetTop)) {\r\n                offsetTop += el.offsetTop;\r\n            }\r\n            if (!isNaN(el.offsetLeft)) {\r\n                offsetLeft += el.offsetLeft;\r\n            }\r\n        } while (el = el.offsetParent);\r\n        return {\r\n            top: offsetTop,\r\n            left: offsetLeft\r\n        };\r\n    };\r\n    /**\r\n     * @param {?} el\r\n     * @param {?=} h\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.inViewport = /**\r\n     * @param {?} el\r\n     * @param {?=} h\r\n     * @return {?}\r\n     */\r\n    function (el, h) {\r\n        if (h === void 0) { h = 0; }\r\n        /** @type {?} */\r\n        var elH = el.offsetHeight;\r\n        /** @type {?} */\r\n        var scrolled = this.scrollY();\r\n        /** @type {?} */\r\n        var viewed = scrolled + this.getViewportH();\r\n        /** @type {?} */\r\n        var elTop = this.getOffset(el).top;\r\n        /** @type {?} */\r\n        var elBottom = elTop + elH;\r\n        // if 0, the element is considered in the viewport as soon as it enters.\r\n        // if 1, the element is considered in the viewport only when it's fully inside\r\n        // value in percentage (1 >= h >= 0)\r\n        // h = h || 0;\r\n        return (elTop + elH * h) <= viewed && (elBottom - elH * h) >= scrolled;\r\n    };\r\n    /**\r\n     * @param {?} a\r\n     * @param {?} b\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.extend = /**\r\n     * @param {?} a\r\n     * @param {?} b\r\n     * @return {?}\r\n     */\r\n    function (a, b) {\r\n        for (var key in b) {\r\n            if (b.hasOwnProperty(key)) {\r\n                a[key] = b[key];\r\n            }\r\n        }\r\n        return a;\r\n    };\r\n    /**\r\n     * Initialize and extend all options\r\n     * @param {?} el\r\n     * @param {?} masonryOptions\r\n     * @param {?=} useAnimation\r\n     * @param {?=} animationOptions\r\n     * @param {?=} useImagesLoaded\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.init = /**\r\n     * Initialize and extend all options\r\n     * @param {?} el\r\n     * @param {?} masonryOptions\r\n     * @param {?=} useAnimation\r\n     * @param {?=} animationOptions\r\n     * @param {?=} useImagesLoaded\r\n     * @return {?}\r\n     */\r\n    function (el, masonryOptions, useAnimation, animationOptions, useImagesLoaded) {\r\n        this.useAnimation = useAnimation;\r\n        this.el = el;\r\n        this.isAnimate = this.useAnimation || (animationOptions ? true : false);\r\n        this.useImagesLoaded = useImagesLoaded;\r\n        this.masonryOptions = this.extend(this.masonryDefaults, masonryOptions);\r\n        this.animationOptions = this.extend(this.animationDefaults, animationOptions);\r\n        return this._init();\r\n    };\r\n    /**\r\n     * @param {?} _element\r\n     * @param {?} options\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.initializeMasonry = /**\r\n     * @param {?} _element\r\n     * @param {?} options\r\n     * @return {?}\r\n     */\r\n    function (_element, options) {\r\n        /** @type {?} */\r\n        var Masonry = require('masonry-layout');\r\n        return new Masonry(_element, options);\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype._init = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        if (this.isAnimate) {\r\n            // add animation effect\r\n            this.el.classList.add(this.animationOptions.animationEffect);\r\n        }\r\n        // get imagesloaded libary instance\r\n        if (this.useImagesLoaded) {\r\n            this.imagesLoaded = require('imagesloaded');\r\n        }\r\n        // check if browser and then intialize Masonry\r\n        if (common.isPlatformBrowser(this._platformId)) {\r\n            return this._initMasonry();\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype._initMasonry = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var _this = this;\r\n        // initialize masonry\r\n        this._msnry = this.initializeMasonry(this.el, this.masonryOptions);\r\n        // use animation options if useAnimation is true\r\n        if (this.isAnimate && this._msnry) {\r\n            // animate on scroll the items inside the viewport\r\n            window.addEventListener('scroll', this._onScrollHandler, false);\r\n            window.addEventListener('resize', this._onResizeHandler, false);\r\n            /**\r\n                   * Remove scroll animations to remove conflicts between Masonry Transitions and Scroll Animations\r\n                   */\r\n            this._msnry.on('layoutComplete', function (items) {\r\n                Array.prototype.slice.call(_this.el.children).forEach(function (element) {\r\n                    element.classList.remove('animate');\r\n                });\r\n            });\r\n            this._msnry.on('removeComplete', function (items) {\r\n                Array.prototype.slice.call(_this.el.children).forEach(function (element) {\r\n                    element.classList.remove('animate');\r\n                });\r\n                _this._msnry.layout();\r\n            });\r\n        }\r\n        return this._msnry;\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype._onScrollFn = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        /** @type {?} */\r\n        var self = this;\r\n        if (!this.didScroll) {\r\n            this.didScroll = true;\r\n            setTimeout(function () { self._scrollPage(); }, 100);\r\n        }\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype._scrollPage = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var _this = this;\r\n        /** @type {?} */\r\n        var self = this;\r\n        /** @type {?} */\r\n        var items = this._msnry.items.map(function (item) { return item.element; });\r\n        if (items.length) {\r\n            items.forEach(function (el, i) {\r\n                if (_this.inViewport(el, self.animationOptions.viewportFactor)) {\r\n                    /** @type {?} */\r\n                    var perspY = _this.scrollY() + _this.getViewportH() / 2;\r\n                    self.el.style.WebkitPerspectiveOrigin = '50% ' + perspY + 'px';\r\n                    self.el.style.MozPerspectiveOrigin = '50% ' + perspY + 'px';\r\n                    self.el.style.perspectiveOrigin = '50% ' + perspY + 'px';\r\n                    if (self.animationOptions.minDuration && self.animationOptions.maxDuration) {\r\n                        /** @type {?} */\r\n                        var randDuration = (Math.random() * (self.animationOptions.maxDuration - self.animationOptions.minDuration)\r\n                            + self.animationOptions.minDuration) + 's';\r\n                        el.style.WebkitAnimationDuration = randDuration;\r\n                        el.style.MozAnimationDuration = randDuration;\r\n                        el.style.animationDuration = randDuration;\r\n                    }\r\n                    el.classList.add('animate');\r\n                    // }, 25 );\r\n                }\r\n                else {\r\n                    el.classList.remove('animate');\r\n                }\r\n            });\r\n        }\r\n        this.didScroll = false;\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype._resizeHandler = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        /** @type {?} */\r\n        var self = this;\r\n        Array.prototype.slice.call(this.el.children).forEach(function (element) {\r\n            element.classList.remove('animate');\r\n        });\r\n        /**\r\n         * @return {?}\r\n         */\r\n        function delayed() {\r\n            self._scrollPage();\r\n            self.resizeTimeout = null;\r\n        }\r\n        if (this.resizeTimeout) {\r\n            clearTimeout(this.resizeTimeout);\r\n        }\r\n        this.resizeTimeout = setTimeout(delayed, 500);\r\n    };\r\n    /**\r\n     * Check if total grid items are redered in the DOM\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype._checkTotalRendered = /**\r\n     * Check if total grid items are redered in the DOM\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        ++this.itemsRenderedCount;\r\n        if (this.itemsRenderedCount === this.itemsCount) {\r\n            window.removeEventListener('scroll', this._onScrollHandler, false);\r\n        }\r\n    };\r\n    /**\r\n     * On Destroy remove Scroll and Resize event Listeners\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.onDestory = /**\r\n     * On Destroy remove Scroll and Resize event Listeners\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        window.removeEventListener('scroll', this._onScrollHandler, false);\r\n        window.removeEventListener('resize', this._onResizeHandler, false);\r\n    };\r\n    /**\r\n     * Remove scroll animations\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.removeAnimation = /**\r\n     * Remove scroll animations\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        if (this.isAnimate) {\r\n            Array.prototype.slice.call(this.el.children).forEach(function (element) {\r\n                element.classList.remove('animate');\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Add Each grid item to Masonry based on Masony addStatus property\r\n     * @param {?} element Element - Grid item\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.add = /**\r\n     * Add Each grid item to Masonry based on Masony addStatus property\r\n     * @param {?} element Element - Grid item\r\n     * @return {?}\r\n     */\r\n    function (element) {\r\n        var _this = this;\r\n        /** @type {?} */\r\n        var addStatus = this.masonryOptions.addStatus.toLowerCase();\r\n        // set margin bottom of gutter value.\r\n        if (this.masonryOptions.gutter) {\r\n            element.style.marginBottom = this.masonryOptions.gutter + 'px';\r\n        }\r\n        if (this.el.hasChildNodes() && this.el.contains(element)) {\r\n            this.el.removeChild(element);\r\n        }\r\n        if (this.useImagesLoaded) {\r\n            setTimeout(function () {\r\n                _this.imagesLoaded(element, function (instance) {\r\n                    ++_this.itemsRenderedCount;\r\n                    _this.items.push(element);\r\n                    // append or prepend based on masonry option\r\n                    if (addStatus === 'prepend') {\r\n                        if (_this._msnry.items.length !== 0) {\r\n                            _this.el.insertBefore(element, _this._msnry.items[0].element);\r\n                        }\r\n                        else {\r\n                            _this.el.appendChild(element);\r\n                        }\r\n                    }\r\n                    else if (addStatus === 'append') {\r\n                        _this.el.appendChild(element);\r\n                    }\r\n                    else {\r\n                        _this.el.appendChild(element);\r\n                    }\r\n                    setTimeout(function () {\r\n                        if (addStatus === 'prepend') {\r\n                            if (_this._msnry.items.length !== 0) {\r\n                                _this._msnry.prepended(element);\r\n                            }\r\n                            else {\r\n                                _this._msnry.appended(element);\r\n                            }\r\n                        }\r\n                        else if (addStatus === 'append') {\r\n                            _this._msnry.appended(element);\r\n                        }\r\n                        else {\r\n                            _this._msnry.addItems(element);\r\n                        }\r\n                        _this._msnry.layout();\r\n                    }, 0);\r\n                });\r\n            }, 0);\r\n        }\r\n        else {\r\n            setTimeout(function () {\r\n                ++_this.itemsRenderedCount;\r\n                _this.items.push(element);\r\n                if (addStatus === 'prepend') {\r\n                    if (_this._msnry.items.length !== 0) {\r\n                        _this.el.insertBefore(element, _this._msnry.items[0].element);\r\n                        // this._msnry.prepended(itemElem);\r\n                    }\r\n                    else {\r\n                        _this.el.appendChild(element);\r\n                        // this._msnry.appended(itemElem);\r\n                    }\r\n                }\r\n                else if (addStatus === 'append') {\r\n                    _this.el.appendChild(element);\r\n                    // this._msnry.appended(itemElem);\r\n                }\r\n                else {\r\n                    _this.el.appendChild(element);\r\n                    // this._msnry.addItems(itemElem);\r\n                }\r\n                setTimeout(function () {\r\n                    if (addStatus === 'prepend') {\r\n                        if (_this._msnry.items.length !== 0) {\r\n                            _this._msnry.prepended(element);\r\n                        }\r\n                        else {\r\n                            _this._msnry.appended(element);\r\n                        }\r\n                    }\r\n                    else if (addStatus === 'append') {\r\n                        _this._msnry.appended(element);\r\n                    }\r\n                    else {\r\n                        _this._msnry.addItems(element);\r\n                    }\r\n                    _this._msnry.layout();\r\n                }, 50);\r\n            }, 0);\r\n        }\r\n    };\r\n    /**\r\n     * TODO: reorder masonry items on load\r\n     * @param {?} element\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.addOrderItem = /**\r\n     * TODO: reorder masonry items on load\r\n     * @param {?} element\r\n     * @return {?}\r\n     */\r\n    function (element) {\r\n        var _this = this;\r\n        /** @type {?} */\r\n        var addStatus = this.masonryOptions.addStatus.toLowerCase();\r\n        // set margin bottom of gutter value.\r\n        if (this.masonryOptions.gutter) {\r\n            element.style.marginBottom = this.masonryOptions.gutter + 'px';\r\n        }\r\n        if (this.useImagesLoaded) {\r\n            setTimeout(function () {\r\n                _this.imagesLoaded(element, function (instance) {\r\n                });\r\n            }, 0);\r\n        }\r\n        else {\r\n            setTimeout(function () {\r\n                if (addStatus === 'prepend') {\r\n                    if (_this._msnry.items.length !== 0) {\r\n                        _this.el.insertBefore(element, _this._msnry.items[0].element);\r\n                        // this._msnry.prepended(element);\r\n                    }\r\n                    else {\r\n                        _this.el.appendChild(element);\r\n                        // this._msnry.appended(element);\r\n                    }\r\n                }\r\n                else if (addStatus === 'append') {\r\n                    _this.el.appendChild(element);\r\n                    // this._msnry.appended(element);\r\n                }\r\n                else {\r\n                    _this.el.appendChild(element);\r\n                    // this._msnry.addItems(element);\r\n                }\r\n                setTimeout(function () {\r\n                    if (_this.itemsRenderedCount === _this.itemsCount) {\r\n                        if (addStatus === 'prepend') {\r\n                            if (_this._msnry.items.length !== 0) {\r\n                                _this._msnry.prepended(element);\r\n                                _this._msnry.layout();\r\n                            }\r\n                            else {\r\n                                _this._msnry.appended(element);\r\n                                _this._msnry.layout();\r\n                            }\r\n                        }\r\n                        else if (addStatus === 'append') {\r\n                            _this._msnry.appended(element);\r\n                            _this._msnry.layout();\r\n                        }\r\n                        else {\r\n                            _this._msnry.addItems(element);\r\n                            _this._msnry.layout();\r\n                        }\r\n                    }\r\n                }, 500);\r\n            }, 0);\r\n        }\r\n    };\r\n    /**\r\n     * Re order Masonry items to original order\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.reorderMasonryItems = /**\r\n     * Re order Masonry items to original order\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var _this = this;\r\n        if (this.itemsRenderedCount === this.itemsCount) {\r\n            /** @type {?} */\r\n            var reorderItems_1 = this.items.sort(function (a, b) {\r\n                return a.dataset.count - b.dataset.count;\r\n            });\r\n            while (this.el.hasChildNodes()) {\r\n                this.el.removeChild(this.el.lastChild);\r\n            }\r\n            setTimeout(function () {\r\n                reorderItems_1.forEach(function (item) {\r\n                    _this.el.appendChild(item);\r\n                    _this._msnry.appended(item);\r\n                });\r\n                if (_this._msnry) {\r\n                    _this._msnry.reloadItems();\r\n                    _this._msnry.layout();\r\n                }\r\n            }, 100);\r\n        }\r\n    };\r\n    /**\r\n     * Set add status to Masonry before adding or appending\r\n     * @param {?} value 'append' or 'prepend' or 'add'\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.setAddStatus = /**\r\n     * Set add status to Masonry before adding or appending\r\n     * @param {?} value 'append' or 'prepend' or 'add'\r\n     * @return {?}\r\n     */\r\n    function (value) {\r\n        this.masonryOptions.addStatus = value;\r\n    };\r\n    /**\r\n     * Remove grid item from Masonry\r\n     * @param {?} item Element: Removed Grid Item DOM\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.removeItem = /**\r\n     * Remove grid item from Masonry\r\n     * @param {?} item Element: Removed Grid Item DOM\r\n     * @return {?}\r\n     */\r\n    function (item) {\r\n        var _this = this;\r\n        this.removeAnimation();\r\n        if (item) {\r\n            item.classList.remove('animate');\r\n            /** @type {?} */\r\n            var obsv = rxjs.Observable.create(function (observer) {\r\n                /** @type {?} */\r\n                var count = item.getAttribute('data-count');\r\n                /** @type {?} */\r\n                var index = _this._msnry.items.findIndex(function (masonryItem) {\r\n                    return masonryItem.element.getAttribute('data-count') === count;\r\n                });\r\n                setTimeout(function () {\r\n                    /** @type {?} */\r\n                    var elem = _this._msnry.items[index].element;\r\n                    _this._onTransitionEnd(observer, elem);\r\n                    /** @type {?} */\r\n                    var indx = _this.items.findIndex(function (element) {\r\n                        return element.dataset.count === item.dataset.count;\r\n                    });\r\n                    _this.items.splice(indx, 1);\r\n                }, 20);\r\n            });\r\n            return obsv;\r\n        }\r\n        return rxjs.empty();\r\n    };\r\n    /**\r\n     * Remove first grid item from the Masonry List\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.removeFirstItem = /**\r\n     * Remove first grid item from the Masonry List\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var _this = this;\r\n        this.removeAnimation();\r\n        if (this._msnry.items.length) {\r\n            this._msnry.items[0].element.classList.remove('animate');\r\n            /** @type {?} */\r\n            var obsv = rxjs.Observable.create(function (observer) {\r\n                //setTimeout(() => {\r\n                //setTimeout(() => {\r\n                _this._onTransitionEnd(observer, _this._msnry.items[0].element);\r\n                _this.items.splice(0, 1);\r\n                //}, 10);\r\n            });\r\n            return obsv;\r\n        }\r\n        return rxjs.empty();\r\n    };\r\n    /**\r\n     * Empty the Masonry list\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.removeAllItems = /**\r\n     * Empty the Masonry list\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var _this = this;\r\n        this.removeAnimation();\r\n        /** @type {?} */\r\n        var obsv = rxjs.Observable.create(function (observer) {\r\n            setTimeout(function () {\r\n                /** @type {?} */\r\n                var items = [];\r\n                _this._msnry.items.forEach(function (masonryItem, index) {\r\n                    items.push({ element: masonryItem.element, index: index });\r\n                    _this.addTransition(masonryItem.element);\r\n                });\r\n                /** @type {?} */\r\n                var elem = _this._msnry.items[_this._msnry.items.length - 1].element;\r\n                /** @type {?} */\r\n                var transitionEnd = function () {\r\n                    observer.next(items);\r\n                    setTimeout(function () {\r\n                        _this._msnry.reloadItems();\r\n                        _this._msnry.layout();\r\n                        _this.items = [];\r\n                        _this.itemsCount = 0;\r\n                        _this.itemsRenderedCount = 0;\r\n                    }, 10);\r\n                    elem.removeEventListener('transitionend', transitionEnd, false);\r\n                };\r\n                elem.addEventListener('transitionend', transitionEnd, false);\r\n                if (_this.masonryOptions.transitionDuration === \"0\") {\r\n                    transitionEnd();\r\n                }\r\n            }, 10);\r\n        });\r\n        return obsv;\r\n    };\r\n    /**\r\n     * Add transition effect on DOM Node removal\r\n     * @param {?} elem\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype.addTransition = /**\r\n     * Add transition effect on DOM Node removal\r\n     * @param {?} elem\r\n     * @return {?}\r\n     */\r\n    function (elem) {\r\n        elem.style.transition = 'transform ' + this.masonryOptions.transitionDuration + ', opacity ' + this.masonryOptions.transitionDuration;\r\n        elem.style.transform = 'scale(0.001)';\r\n        elem.style.opacity = '0';\r\n    };\r\n    /**\r\n     * On transition End, remove eventListener\r\n     * @param {?} observer Subscriber<MasonryGridItem>\r\n     * @param {?} elem\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridService.prototype._onTransitionEnd = /**\r\n     * On transition End, remove eventListener\r\n     * @param {?} observer Subscriber<MasonryGridItem>\r\n     * @param {?} elem\r\n     * @return {?}\r\n     */\r\n    function (observer, elem) {\r\n        var _this = this;\r\n        if (elem) {\r\n            this.addTransition(elem);\r\n            /** @type {?} */\r\n            var transitionEnd_1 = function () {\r\n                /** @type {?} */\r\n                var isindex = Array.prototype.slice.call(_this.el.children).findIndex(function (element) {\r\n                    return element.getAttribute('data-count') === elem.getAttribute('data-count');\r\n                });\r\n                if (isindex !== -1) {\r\n                    observer.next({ element: elem, index: isindex });\r\n                }\r\n                setTimeout(function () {\r\n                    _this._msnry.reloadItems();\r\n                    _this._msnry.layout();\r\n                }, 10);\r\n                elem.removeEventListener('transitionend', transitionEnd_1, false);\r\n            };\r\n            elem.addEventListener('transitionend', transitionEnd_1, false);\r\n        }\r\n    };\r\n    /** @nocollapse */\r\n    NgMasonryGridService.ctorParameters = function () { return [\r\n        { type: undefined, decorators: [{ type: core.Inject, args: [core.PLATFORM_ID,] }] }\r\n    ]; };\nNgMasonryGridService.ɵfac = function NgMasonryGridService_Factory(t) { return new (t || NgMasonryGridService)(ɵngcc0.ɵɵinject(core.PLATFORM_ID)); };\nNgMasonryGridService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NgMasonryGridService, factory: function (t) { return NgMasonryGridService.ɵfac(t); } });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgMasonryGridService, [{\n        type: core.Injectable\n    }], function () { return [{ type: undefined, decorators: [{\n                type: core.Inject,\n                args: [core.PLATFORM_ID]\n            }] }]; }, null); })();\r\n    return NgMasonryGridService;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\r\n */\r\n/**\r\n * Shailendra Kumar <shailu.snist@gmail.com>\r\n * @ignore\r\n */\r\nvar NgMasonryGridComponent = /** @class */ (function () {\r\n    function NgMasonryGridComponent(_platformId, _element, masonryGridService) {\r\n        this._platformId = _platformId;\r\n        this._element = _element;\r\n        this.masonryGridService = masonryGridService;\r\n        // Inputs\r\n        this.masonryOptions = {};\r\n        this.useAnimation = false;\r\n        this.useImagesLoaded = false;\r\n        // Outputs\r\n        this.layoutComplete = new core.EventEmitter();\r\n        this.removeComplete = new core.EventEmitter();\r\n        this.onNgMasonryInit = new core.EventEmitter();\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridComponent.prototype.ngOnInit = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this._element.nativeElement.classList.add('grid');\r\n        this.initializeMasonry();\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridComponent.prototype.ngAfterContentInit = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        // initialize masonry after View Initialization\r\n        // this.initializeMasonry();\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridComponent.prototype.ngOnDestroy = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        if (this._msnry) {\r\n            this._msnry.destroy();\r\n            this.masonryGridService.onDestory();\r\n        }\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridComponent.prototype.layout = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var _this = this;\r\n        setTimeout(function () {\r\n            _this._msnry.layout();\r\n        }, 50);\r\n    };\r\n    /**\r\n     * @param {?} element\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridComponent.prototype.remove = /**\r\n     * @param {?} element\r\n     * @return {?}\r\n     */\r\n    function (element) {\r\n        this._msnry.remove(element);\r\n        this.layout();\r\n    };\r\n    /**\r\n     * @param {?} element\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridComponent.prototype.add = /**\r\n     * @param {?} element\r\n     * @return {?}\r\n     */\r\n    function (element) {\r\n        this.masonryGridService.add(element);\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridComponent.prototype.initializeMasonry = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var _this = this;\r\n        // initialize Masonry with Animation effects\r\n        this._msnry = this.masonryGridService\r\n            .init(this._element.nativeElement, this.masonryOptions, this.useAnimation, this.scrollAnimationOptions, this.useImagesLoaded);\r\n        // Bind to Masonry events\r\n        this._msnry.on('layoutComplete', function (items) {\r\n            _this.layoutComplete.emit(items);\r\n        });\r\n        this._msnry.on('removeComplete', function (items) {\r\n            _this.removeComplete.emit(items);\r\n        });\r\n        this._msnry.removeAnimation = function () {\r\n            _this.masonryGridService.removeAnimation();\r\n        };\r\n        this._msnry.setAddStatus = function (value) {\r\n            _this.masonryGridService.setAddStatus(value);\r\n        };\r\n        this._msnry.removeItem = function (item) {\r\n            return _this.masonryGridService.removeItem(item);\r\n        };\r\n        this._msnry.removeFirstItem = function () {\r\n            return _this.masonryGridService.removeFirstItem();\r\n        };\r\n        this._msnry.removeAllItems = function () {\r\n            return _this.masonryGridService.removeAllItems();\r\n        };\r\n        this._msnry.reOrderItems = function () {\r\n            return _this.masonryGridService.reorderMasonryItems();\r\n        };\r\n        // emit Masonry Initialization event\r\n        this.onNgMasonryInit.emit(this._msnry);\r\n        this.layout();\r\n    };\r\n    /** @nocollapse */\r\n    NgMasonryGridComponent.ctorParameters = function () { return [\r\n        { type: undefined, decorators: [{ type: core.Inject, args: [core.PLATFORM_ID,] }] },\r\n        { type: core.ElementRef },\r\n        { type: NgMasonryGridService }\r\n    ]; };\r\n    NgMasonryGridComponent.propDecorators = {\r\n        masonryOptions: [{ type: core.Input }],\r\n        useAnimation: [{ type: core.Input }],\r\n        scrollAnimationOptions: [{ type: core.Input }],\r\n        useImagesLoaded: [{ type: core.Input }],\r\n        layoutComplete: [{ type: core.Output }],\r\n        removeComplete: [{ type: core.Output }],\r\n        onNgMasonryInit: [{ type: core.Output }]\r\n    };\nNgMasonryGridComponent.ɵfac = function NgMasonryGridComponent_Factory(t) { return new (t || NgMasonryGridComponent)(ɵngcc0.ɵɵdirectiveInject(core.PLATFORM_ID), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NgMasonryGridService)); };\nNgMasonryGridComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NgMasonryGridComponent, selectors: [[\"\", \"ng-masonry-grid\", \"\"], [\"ng-masonry-grid\"]], inputs: { masonryOptions: \"masonryOptions\", useAnimation: \"useAnimation\", useImagesLoaded: \"useImagesLoaded\", scrollAnimationOptions: \"scrollAnimationOptions\" }, outputs: { layoutComplete: \"layoutComplete\", removeComplete: \"removeComplete\", onNgMasonryInit: \"onNgMasonryInit\" }, attrs: _c0, ngContentSelectors: _c1, decls: 1, vars: 0, template: function NgMasonryGridComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n    } }, styles: [\"[_nghost-%COMP%] {\\n\\t\\t\\tdisplay: block;\\n\\t\\t}\"] });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgMasonryGridComponent, [{\n        type: core.Component,\n        args: [{\n                selector: '[ng-masonry-grid], ng-masonry-grid',\n                template: '<ng-content></ng-content>',\n                styles: [\n                    \"\\n\\t\\t:host {\\n\\t\\t\\tdisplay: block;\\n\\t\\t}\\n\\t\"\n                ]\n            }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: core.Inject,\n                args: [core.PLATFORM_ID]\n            }] }, { type: ɵngcc0.ElementRef }, { type: NgMasonryGridService }]; }, { masonryOptions: [{\n            type: core.Input\n        }], useAnimation: [{\n            type: core.Input\n        }], useImagesLoaded: [{\n            type: core.Input\n        }], layoutComplete: [{\n            type: core.Output\n        }], removeComplete: [{\n            type: core.Output\n        }], onNgMasonryInit: [{\n            type: core.Output\n        }], scrollAnimationOptions: [{\n            type: core.Input\n        }] }); })();\r\n    return NgMasonryGridComponent;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\r\n */\r\n/**\r\n * Shailendra Kumar <shailu.snist@gmail.com>\r\n * @ignore\r\n */\r\nvar NgMasonryGridDirective = /** @class */ (function () {\r\n    function NgMasonryGridDirective(_element, _parent, platformId, masonryGridService) {\r\n        this._element = _element;\r\n        this._parent = _parent;\r\n        this.platformId = platformId;\r\n        this.masonryGridService = masonryGridService;\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridDirective.prototype.ngOnInit = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        // this._parent.add(this._element.nativeElement);\r\n    };\r\n    /**\r\n     * Add Masonry grid item after view initialization\r\n     */\r\n    /**\r\n     * Add Masonry grid item after view initialization\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridDirective.prototype.ngAfterViewInit = /**\r\n     * Add Masonry grid item after view initialization\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        if (common.isPlatformBrowser(this.platformId)) {\r\n            this.masonryGridService.itemsCount++;\r\n            // set count attribute for every grid item\r\n            this._element.nativeElement.setAttribute('data-count', this.masonryGridService.itemsCount);\r\n            // if (this.masonryGridService.masonryOptions.horizontalOrder) {\r\n            //   this.masonryGridService.addOrderItem(this._element.nativeElement);\r\n            // } else {\r\n            //   this._parent.add(this._element.nativeElement);\r\n            // }\r\n            this._parent.add(this._element.nativeElement);\r\n            this.watchForHtmlChanges();\r\n        }\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridDirective.prototype.ngOnDestroy = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n    };\r\n    /**\r\n     * When HTML in brick changes dynamically, observe that and change layout\r\n     * @return {?}\r\n     */\r\n    NgMasonryGridDirective.prototype.watchForHtmlChanges = /**\r\n     * When HTML in brick changes dynamically, observe that and change layout\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        MutationObserver = window.MutationObserver || window.WebKitMutationObserver;\r\n        if (MutationObserver) {\r\n            /** *\r\n             * Watch for any changes to subtree\r\n              @type {?} */\r\n            var self_1 = this;\r\n            /** @type {?} */\r\n            var observer = new MutationObserver(function (mutations, observerFromElement) {\r\n                self_1._parent.layout();\r\n            });\r\n            // define what element should be observed by the observer\r\n            // and what types of mutations trigger the callback\r\n            observer.observe(this._element.nativeElement, {\r\n                subtree: true,\r\n                childList: true\r\n            });\r\n        }\r\n    };\r\n    /** @nocollapse */\r\n    NgMasonryGridDirective.ctorParameters = function () { return [\r\n        { type: core.ElementRef },\r\n        { type: NgMasonryGridComponent, decorators: [{ type: core.Inject, args: [core.forwardRef(function () { return NgMasonryGridComponent; }),] }] },\r\n        { type: undefined, decorators: [{ type: core.Inject, args: [core.PLATFORM_ID,] }] },\r\n        { type: NgMasonryGridService }\r\n    ]; };\nNgMasonryGridDirective.ɵfac = function NgMasonryGridDirective_Factory(t) { return new (t || NgMasonryGridDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(core.forwardRef(function () { return NgMasonryGridComponent; })), ɵngcc0.ɵɵdirectiveInject(core.PLATFORM_ID), ɵngcc0.ɵɵdirectiveInject(NgMasonryGridService)); };\nNgMasonryGridDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: NgMasonryGridDirective, selectors: [[\"\", \"ng-masonry-grid-item\", \"\"], [\"ng-masonry-grid-item\"]] });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgMasonryGridDirective, [{\n        type: core.Directive,\n        args: [{\n                // tslint:disable-next-line:directive-selector\n                selector: '[ng-masonry-grid-item], ng-masonry-grid-item'\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: NgMasonryGridComponent, decorators: [{\n                type: core.Inject,\n                args: [core.forwardRef(function () { return NgMasonryGridComponent; })]\n            }] }, { type: undefined, decorators: [{\n                type: core.Inject,\n                args: [core.PLATFORM_ID]\n            }] }, { type: NgMasonryGridService }]; }, null); })();\r\n    return NgMasonryGridDirective;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\r\n */\r\n/**\r\n * Shailendra Kumar <shailu.snist@gmail.com>\r\n * @ignore\r\n */\r\nvar NgMasonryGridModule = /** @class */ (function () {\r\n    function NgMasonryGridModule() {\r\n    }\nNgMasonryGridModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NgMasonryGridModule });\nNgMasonryGridModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NgMasonryGridModule_Factory(t) { return new (t || NgMasonryGridModule)(); }, providers: [NgMasonryGridService], imports: [[common.CommonModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NgMasonryGridModule, { declarations: [NgMasonryGridComponent, NgMasonryGridDirective], imports: [ɵngcc1.CommonModule], exports: [NgMasonryGridComponent, NgMasonryGridDirective] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgMasonryGridModule, [{\n        type: core.NgModule,\n        args: [{\n                imports: [common.CommonModule],\n                exports: [NgMasonryGridComponent, NgMasonryGridDirective],\n                declarations: [NgMasonryGridComponent, NgMasonryGridDirective],\n                providers: [NgMasonryGridService]\n            }]\n    }], function () { return []; }, null); })();\r\n    return NgMasonryGridModule;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\r\n */\r\n/**\r\n * Masonry Grid item\r\n */\r\nvar MasonryGridItem = /** @class */ (function () {\r\n    function MasonryGridItem() {\r\n    }\r\n    return MasonryGridItem;\r\n}());\r\n/**\r\n * Masonry Options\r\n * @record\r\n */\r\n\r\n/**\r\n * Masonry Object\r\n */\r\nvar Masonry = /** @class */ (function () {\r\n    function Masonry(selector, options) {\r\n    }\r\n    \r\n    return Masonry;\r\n}());\r\n/**\r\n * Scroll Animation options\r\n * @record\r\n */\r\n\r\n/**\r\n * interface for an image currently loading or completed\r\n * @record\r\n */\r\n\r\n/**\r\n * @record\r\n */\r\n\r\n/**\r\n * @record\r\n */\r\n\r\n/**\r\n * @record\r\n */\r\n\r\n/**\r\n * @record\r\n */\r\n\r\n/**\r\n * @record\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc\r\n */\n\nexports.NgMasonryGridModule = NgMasonryGridModule;\nexports.NgMasonryGridComponent = NgMasonryGridComponent;\nexports.NgMasonryGridDirective = NgMasonryGridDirective;\nexports.NgMasonryGridService = NgMasonryGridService;\nexports.Masonry = Masonry;\nexports.MasonryGridItem = MasonryGridItem;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctbWFzb25yeS1ncmlkLnVtZC5qcyIsInNvdXJjZXMiOlsibmctbWFzb25yeS1ncmlkLnVtZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLDRIQUF3RTtBQUN4RSx3RkFBc0Q7QUFDdEQsMENBQVU7QUFDVixpQ0FBbUI7OztBQUE0QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFHTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztrQ0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQVNNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQU1NO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztrRUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztnREFRTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHR0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMsIHJlcXVpcmUoJ0Bhbmd1bGFyL2NvcmUnKSwgcmVxdWlyZSgnQGFuZ3VsYXIvY29tbW9uJyksIHJlcXVpcmUoJ3J4anMnKSkgOlxuXHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJywgJ0Bhbmd1bGFyL2NvcmUnLCAnQGFuZ3VsYXIvY29tbW9uJywgJ3J4anMnXSwgZmFjdG9yeSkgOlxuXHQoZmFjdG9yeSgoZ2xvYmFsWyduZy1tYXNvbnJ5LWdyaWQnXSA9IHt9KSxnbG9iYWwuY29yZSxnbG9iYWwuY29tbW9uLGdsb2JhbC5yeGpzKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoZXhwb3J0cyxjb3JlLGNvbW1vbixyeGpzKSB7ICd1c2Ugc3RyaWN0JztcblxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgYWRkZWQgYnkgdHNpY2tsZVxyXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXMsZXh0cmFSZXF1aXJlLHVzZWxlc3NDb2RlfSBjaGVja2VkIGJ5IHRzY1xyXG4gKi9cclxuLyoqXHJcbiAqIFNoYWlsZW5kcmEgS3VtYXIgPHNoYWlsdS5zbmlzdEBnbWFpbC5jb20+XHJcbiAqIEBpZ25vcmVcclxuICovXHJcbnZhciBOZ01hc29ucnlHcmlkU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE5nTWFzb25yeUdyaWRTZXJ2aWNlKF9wbGF0Zm9ybUlkKSB7XHJcbiAgICAgICAgdGhpcy5fcGxhdGZvcm1JZCA9IF9wbGF0Zm9ybUlkO1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBbXTtcclxuICAgICAgICB0aGlzLml0ZW1zQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuaXRlbXNSZW5kZXJlZENvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmlzQW5pbWF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZG9jRWxlbSA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVmYXVsdCBhbmltYXRpb24gb3B0aW9ucyBvZiBncmlkIGl0ZW1zIG9uIHNjcm9sbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uRGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGlvbkVmZmVjdDogJ2VmZmVjdC0xJyxcclxuICAgICAgICAgICAgLy8gZGVmYXVsdCBhbmltYXRpb24gZWZmZWN0LTFcclxuICAgICAgICAgICAgLy8gTWluaW11bSBhbmQgYSBtYXhpbXVtIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gKHJhbmRvbSB2YWx1ZSBpcyBjaG9zZW4pXHJcbiAgICAgICAgICAgIG1pbkR1cmF0aW9uOiAwLFxyXG4gICAgICAgICAgICBtYXhEdXJhdGlvbjogMCxcclxuICAgICAgICAgICAgLy8gVGhlIHZpZXdwb3J0RmFjdG9yIGRlZmluZXMgaG93IG11Y2ggb2YgdGhlIGFwcGVhcmluZyBpdGVtIGhhcyB0byBiZSB2aXNpYmxlIGluIG9yZGVyIHRvIHRyaWdnZXIgdGhlIGFuaW1hdGlvblxyXG4gICAgICAgICAgICAvLyBpZiB3ZSdkIHVzZSBhIHZhbHVlIG9mIDAsIHRoaXMgd291bGQgbWVhbiB0aGF0IGl0IHdvdWxkIGFkZCB0aGUgYW5pbWF0aW9uIGNsYXNzIGFzIHNvb24gYXMgdGhlIGl0ZW0gaXMgaW4gdGhlIHZpZXdwb3J0LlxyXG4gICAgICAgICAgICAvLyBJZiB3ZSB3ZXJlIHRvIHVzZSB0aGUgdmFsdWUgb2YgMSwgdGhlIGFuaW1hdGlvbiB3b3VsZCBvbmx5IGJlIHRyaWdnZXJlZCB3aGVuIHdlIHNlZSBhbGwgb2YgdGhlIGl0ZW0gaW4gdGhlIHZpZXdwb3J0ICgxMDAlIG9mIGl0KVxyXG4gICAgICAgICAgICB2aWV3cG9ydEZhY3RvcjogMFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVmYXVsdCBtYXNvbnJ5IG9wdGlvbnNcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1hc29ucnlEZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgLy8gU2V0IGRlZmF1bHQgaXRlbVNlbGVjdG9yOiBtYW5kYXRvcnlcclxuICAgICAgICAgICAgaXRlbVNlbGVjdG9yOiAnW25nLW1hc29ucnktZ3JpZC1pdGVtXSwgbmctbWFzb25yeS1ncmlkLWl0ZW0sIFtuZy1tYXNvbnJ5LWdyaWQtaXRlbV0uYW5pbWF0ZSwgbmctbWFzb25yeS1ncmlkLWl0ZW0uYW5pbWF0ZScsXHJcbiAgICAgICAgICAgIGluaXRMYXlvdXQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBhZGRTdGF0dXM6ICdhcHBlbmQnIC8vICdwcmVwZW5kJyBvciAnYWRkJyBvciAncmVvcmRlcidcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX29uU2Nyb2xsSGFuZGxlciA9IHRoaXMuX29uU2Nyb2xsRm4uYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9vblJlc2l6ZUhhbmRsZXIgPSB0aGlzLl9yZXNpemVIYW5kbGVyLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5nTWFzb25yeUdyaWRTZXJ2aWNlLnByb3RvdHlwZS5nZXRWaWV3cG9ydEggPSAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvKiogQHR5cGUgez99ICovXHJcbiAgICAgICAgdmFyIGNsaWVudCA9IHRoaXMuZG9jRWxlbVsnY2xpZW50SGVpZ2h0J107XHJcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgICAgIHZhciBpbm5lciA9IHdpbmRvd1snaW5uZXJIZWlnaHQnXTtcclxuICAgICAgICBpZiAoY2xpZW50IDwgaW5uZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlubmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNsaWVudDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ01hc29ucnlHcmlkU2VydmljZS5wcm90b3R5cGUuc2Nyb2xsWSA9IC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cucGFnZVlPZmZzZXQgfHwgdGhpcy5kb2NFbGVtLnNjcm9sbFRvcDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gZWxcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5nTWFzb25yeUdyaWRTZXJ2aWNlLnByb3RvdHlwZS5nZXRPZmZzZXQgPSAvKipcclxuICAgICAqIEBwYXJhbSB7P30gZWxcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgICAgICB2YXIgb2Zmc2V0VG9wID0gMDtcclxuICAgICAgICAvKiogQHR5cGUgez99ICovXHJcbiAgICAgICAgdmFyIG9mZnNldExlZnQgPSAwO1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgaWYgKCFpc05hTihlbC5vZmZzZXRUb3ApKSB7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXRUb3AgKz0gZWwub2Zmc2V0VG9wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghaXNOYU4oZWwub2Zmc2V0TGVmdCkpIHtcclxuICAgICAgICAgICAgICAgIG9mZnNldExlZnQgKz0gZWwub2Zmc2V0TGVmdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gd2hpbGUgKGVsID0gZWwub2Zmc2V0UGFyZW50KTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b3A6IG9mZnNldFRvcCxcclxuICAgICAgICAgICAgbGVmdDogb2Zmc2V0TGVmdFxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGVsXHJcbiAgICAgKiBAcGFyYW0gez89fSBoXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ01hc29ucnlHcmlkU2VydmljZS5wcm90b3R5cGUuaW5WaWV3cG9ydCA9IC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBlbFxyXG4gICAgICogQHBhcmFtIHs/PX0gaFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gKGVsLCBoKSB7XHJcbiAgICAgICAgaWYgKGggPT09IHZvaWQgMCkgeyBoID0gMDsgfVxyXG4gICAgICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgICAgICB2YXIgZWxIID0gZWwub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgICAgICB2YXIgc2Nyb2xsZWQgPSB0aGlzLnNjcm9sbFkoKTtcclxuICAgICAgICAvKiogQHR5cGUgez99ICovXHJcbiAgICAgICAgdmFyIHZpZXdlZCA9IHNjcm9sbGVkICsgdGhpcy5nZXRWaWV3cG9ydEgoKTtcclxuICAgICAgICAvKiogQHR5cGUgez99ICovXHJcbiAgICAgICAgdmFyIGVsVG9wID0gdGhpcy5nZXRPZmZzZXQoZWwpLnRvcDtcclxuICAgICAgICAvKiogQHR5cGUgez99ICovXHJcbiAgICAgICAgdmFyIGVsQm90dG9tID0gZWxUb3AgKyBlbEg7XHJcbiAgICAgICAgLy8gaWYgMCwgdGhlIGVsZW1lbnQgaXMgY29uc2lkZXJlZCBpbiB0aGUgdmlld3BvcnQgYXMgc29vbiBhcyBpdCBlbnRlcnMuXHJcbiAgICAgICAgLy8gaWYgMSwgdGhlIGVsZW1lbnQgaXMgY29uc2lkZXJlZCBpbiB0aGUgdmlld3BvcnQgb25seSB3aGVuIGl0J3MgZnVsbHkgaW5zaWRlXHJcbiAgICAgICAgLy8gdmFsdWUgaW4gcGVyY2VudGFnZSAoMSA+PSBoID49IDApXHJcbiAgICAgICAgLy8gaCA9IGggfHwgMDtcclxuICAgICAgICByZXR1cm4gKGVsVG9wICsgZWxIICogaCkgPD0gdmlld2VkICYmIChlbEJvdHRvbSAtIGVsSCAqIGgpID49IHNjcm9sbGVkO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBhXHJcbiAgICAgKiBAcGFyYW0gez99IGJcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5nTWFzb25yeUdyaWRTZXJ2aWNlLnByb3RvdHlwZS5leHRlbmQgPSAvKipcclxuICAgICAqIEBwYXJhbSB7P30gYVxyXG4gICAgICogQHBhcmFtIHs/fSBiXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBiKSB7XHJcbiAgICAgICAgICAgIGlmIChiLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGFba2V5XSA9IGJba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgYW5kIGV4dGVuZCBhbGwgb3B0aW9uc1xyXG4gICAgICogQHBhcmFtIHs/fSBlbFxyXG4gICAgICogQHBhcmFtIHs/fSBtYXNvbnJ5T3B0aW9uc1xyXG4gICAgICogQHBhcmFtIHs/PX0gdXNlQW5pbWF0aW9uXHJcbiAgICAgKiBAcGFyYW0gez89fSBhbmltYXRpb25PcHRpb25zXHJcbiAgICAgKiBAcGFyYW0gez89fSB1c2VJbWFnZXNMb2FkZWRcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5nTWFzb25yeUdyaWRTZXJ2aWNlLnByb3RvdHlwZS5pbml0ID0gLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGFuZCBleHRlbmQgYWxsIG9wdGlvbnNcclxuICAgICAqIEBwYXJhbSB7P30gZWxcclxuICAgICAqIEBwYXJhbSB7P30gbWFzb25yeU9wdGlvbnNcclxuICAgICAqIEBwYXJhbSB7Pz19IHVzZUFuaW1hdGlvblxyXG4gICAgICogQHBhcmFtIHs/PX0gYW5pbWF0aW9uT3B0aW9uc1xyXG4gICAgICogQHBhcmFtIHs/PX0gdXNlSW1hZ2VzTG9hZGVkXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiAoZWwsIG1hc29ucnlPcHRpb25zLCB1c2VBbmltYXRpb24sIGFuaW1hdGlvbk9wdGlvbnMsIHVzZUltYWdlc0xvYWRlZCkge1xyXG4gICAgICAgIHRoaXMudXNlQW5pbWF0aW9uID0gdXNlQW5pbWF0aW9uO1xyXG4gICAgICAgIHRoaXMuZWwgPSBlbDtcclxuICAgICAgICB0aGlzLmlzQW5pbWF0ZSA9IHRoaXMudXNlQW5pbWF0aW9uIHx8IChhbmltYXRpb25PcHRpb25zID8gdHJ1ZSA6IGZhbHNlKTtcclxuICAgICAgICB0aGlzLnVzZUltYWdlc0xvYWRlZCA9IHVzZUltYWdlc0xvYWRlZDtcclxuICAgICAgICB0aGlzLm1hc29ucnlPcHRpb25zID0gdGhpcy5leHRlbmQodGhpcy5tYXNvbnJ5RGVmYXVsdHMsIG1hc29ucnlPcHRpb25zKTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbk9wdGlvbnMgPSB0aGlzLmV4dGVuZCh0aGlzLmFuaW1hdGlvbkRlZmF1bHRzLCBhbmltYXRpb25PcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5pdCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBfZWxlbWVudFxyXG4gICAgICogQHBhcmFtIHs/fSBvcHRpb25zXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ01hc29ucnlHcmlkU2VydmljZS5wcm90b3R5cGUuaW5pdGlhbGl6ZU1hc29ucnkgPSAvKipcclxuICAgICAqIEBwYXJhbSB7P30gX2VsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7P30gb3B0aW9uc1xyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gKF9lbGVtZW50LCBvcHRpb25zKSB7XHJcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgICAgIHZhciBNYXNvbnJ5ID0gcmVxdWlyZSgnbWFzb25yeS1sYXlvdXQnKTtcclxuICAgICAgICByZXR1cm4gbmV3IE1hc29ucnkoX2VsZW1lbnQsIG9wdGlvbnMpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmdNYXNvbnJ5R3JpZFNlcnZpY2UucHJvdG90eXBlLl9pbml0ID0gLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNBbmltYXRlKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBhbmltYXRpb24gZWZmZWN0XHJcbiAgICAgICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCh0aGlzLmFuaW1hdGlvbk9wdGlvbnMuYW5pbWF0aW9uRWZmZWN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZ2V0IGltYWdlc2xvYWRlZCBsaWJhcnkgaW5zdGFuY2VcclxuICAgICAgICBpZiAodGhpcy51c2VJbWFnZXNMb2FkZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5pbWFnZXNMb2FkZWQgPSByZXF1aXJlKCdpbWFnZXNsb2FkZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY2hlY2sgaWYgYnJvd3NlciBhbmQgdGhlbiBpbnRpYWxpemUgTWFzb25yeVxyXG4gICAgICAgIGlmIChjb21tb24uaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5fcGxhdGZvcm1JZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2luaXRNYXNvbnJ5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmdNYXNvbnJ5R3JpZFNlcnZpY2UucHJvdG90eXBlLl9pbml0TWFzb25yeSA9IC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBtYXNvbnJ5XHJcbiAgICAgICAgdGhpcy5fbXNucnkgPSB0aGlzLmluaXRpYWxpemVNYXNvbnJ5KHRoaXMuZWwsIHRoaXMubWFzb25yeU9wdGlvbnMpO1xyXG4gICAgICAgIC8vIHVzZSBhbmltYXRpb24gb3B0aW9ucyBpZiB1c2VBbmltYXRpb24gaXMgdHJ1ZVxyXG4gICAgICAgIGlmICh0aGlzLmlzQW5pbWF0ZSAmJiB0aGlzLl9tc25yeSkge1xyXG4gICAgICAgICAgICAvLyBhbmltYXRlIG9uIHNjcm9sbCB0aGUgaXRlbXMgaW5zaWRlIHRoZSB2aWV3cG9ydFxyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5fb25TY3JvbGxIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9vblJlc2l6ZUhhbmRsZXIsIGZhbHNlKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgICAqIFJlbW92ZSBzY3JvbGwgYW5pbWF0aW9ucyB0byByZW1vdmUgY29uZmxpY3RzIGJldHdlZW4gTWFzb25yeSBUcmFuc2l0aW9ucyBhbmQgU2Nyb2xsIEFuaW1hdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuX21zbnJ5Lm9uKCdsYXlvdXRDb21wbGV0ZScsIGZ1bmN0aW9uIChpdGVtcykge1xyXG4gICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoX3RoaXMuZWwuY2hpbGRyZW4pLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGUnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5fbXNucnkub24oJ3JlbW92ZUNvbXBsZXRlJywgZnVuY3Rpb24gKGl0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChfdGhpcy5lbC5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0ZScpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5fbXNucnkubGF5b3V0KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fbXNucnk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ01hc29ucnlHcmlkU2VydmljZS5wcm90b3R5cGUuX29uU2Nyb2xsRm4gPSAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvKiogQHR5cGUgez99ICovXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIGlmICghdGhpcy5kaWRTY3JvbGwpIHtcclxuICAgICAgICAgICAgdGhpcy5kaWRTY3JvbGwgPSB0cnVlO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgc2VsZi5fc2Nyb2xsUGFnZSgpOyB9LCAxMDApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5nTWFzb25yeUdyaWRTZXJ2aWNlLnByb3RvdHlwZS5fc2Nyb2xsUGFnZSA9IC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAvKiogQHR5cGUgez99ICovXHJcbiAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5fbXNucnkuaXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBpdGVtLmVsZW1lbnQ7IH0pO1xyXG4gICAgICAgIGlmIChpdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWwsIGkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pblZpZXdwb3J0KGVsLCBzZWxmLmFuaW1hdGlvbk9wdGlvbnMudmlld3BvcnRGYWN0b3IpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwZXJzcFkgPSBfdGhpcy5zY3JvbGxZKCkgKyBfdGhpcy5nZXRWaWV3cG9ydEgoKSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5lbC5zdHlsZS5XZWJraXRQZXJzcGVjdGl2ZU9yaWdpbiA9ICc1MCUgJyArIHBlcnNwWSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5lbC5zdHlsZS5Nb3pQZXJzcGVjdGl2ZU9yaWdpbiA9ICc1MCUgJyArIHBlcnNwWSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5lbC5zdHlsZS5wZXJzcGVjdGl2ZU9yaWdpbiA9ICc1MCUgJyArIHBlcnNwWSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuYW5pbWF0aW9uT3B0aW9ucy5taW5EdXJhdGlvbiAmJiBzZWxmLmFuaW1hdGlvbk9wdGlvbnMubWF4RHVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmFuZER1cmF0aW9uID0gKE1hdGgucmFuZG9tKCkgKiAoc2VsZi5hbmltYXRpb25PcHRpb25zLm1heER1cmF0aW9uIC0gc2VsZi5hbmltYXRpb25PcHRpb25zLm1pbkR1cmF0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBzZWxmLmFuaW1hdGlvbk9wdGlvbnMubWluRHVyYXRpb24pICsgJ3MnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5XZWJraXRBbmltYXRpb25EdXJhdGlvbiA9IHJhbmREdXJhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuTW96QW5pbWF0aW9uRHVyYXRpb24gPSByYW5kRHVyYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmFuaW1hdGlvbkR1cmF0aW9uID0gcmFuZER1cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdhbmltYXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfSwgMjUgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGlkU2Nyb2xsID0gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ01hc29ucnlHcmlkU2VydmljZS5wcm90b3R5cGUuX3Jlc2l6ZUhhbmRsZXIgPSAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvKiogQHR5cGUgez99ICovXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuZWwuY2hpbGRyZW4pLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHJldHVybiB7P31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBkZWxheWVkKCkge1xyXG4gICAgICAgICAgICBzZWxmLl9zY3JvbGxQYWdlKCk7XHJcbiAgICAgICAgICAgIHNlbGYucmVzaXplVGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZVRpbWVvdXQpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZW91dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVzaXplVGltZW91dCA9IHNldFRpbWVvdXQoZGVsYXllZCwgNTAwKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIHRvdGFsIGdyaWQgaXRlbXMgYXJlIHJlZGVyZWQgaW4gdGhlIERPTVxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmdNYXNvbnJ5R3JpZFNlcnZpY2UucHJvdG90eXBlLl9jaGVja1RvdGFsUmVuZGVyZWQgPSAvKipcclxuICAgICAqIENoZWNrIGlmIHRvdGFsIGdyaWQgaXRlbXMgYXJlIHJlZGVyZWQgaW4gdGhlIERPTVxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICsrdGhpcy5pdGVtc1JlbmRlcmVkQ291bnQ7XHJcbiAgICAgICAgaWYgKHRoaXMuaXRlbXNSZW5kZXJlZENvdW50ID09PSB0aGlzLml0ZW1zQ291bnQpIHtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX29uU2Nyb2xsSGFuZGxlciwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIE9uIERlc3Ryb3kgcmVtb3ZlIFNjcm9sbCBhbmQgUmVzaXplIGV2ZW50IExpc3RlbmVyc1xyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmdNYXNvbnJ5R3JpZFNlcnZpY2UucHJvdG90eXBlLm9uRGVzdG9yeSA9IC8qKlxyXG4gICAgICogT24gRGVzdHJveSByZW1vdmUgU2Nyb2xsIGFuZCBSZXNpemUgZXZlbnQgTGlzdGVuZXJzXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX29uU2Nyb2xsSGFuZGxlciwgZmFsc2UpO1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9vblJlc2l6ZUhhbmRsZXIsIGZhbHNlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBzY3JvbGwgYW5pbWF0aW9uc1xyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmdNYXNvbnJ5R3JpZFNlcnZpY2UucHJvdG90eXBlLnJlbW92ZUFuaW1hdGlvbiA9IC8qKlxyXG4gICAgICogUmVtb3ZlIHNjcm9sbCBhbmltYXRpb25zXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNBbmltYXRlKSB7XHJcbiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuZWwuY2hpbGRyZW4pLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0ZScpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgRWFjaCBncmlkIGl0ZW0gdG8gTWFzb25yeSBiYXNlZCBvbiBNYXNvbnkgYWRkU3RhdHVzIHByb3BlcnR5XHJcbiAgICAgKiBAcGFyYW0gez99IGVsZW1lbnQgRWxlbWVudCAtIEdyaWQgaXRlbVxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmdNYXNvbnJ5R3JpZFNlcnZpY2UucHJvdG90eXBlLmFkZCA9IC8qKlxyXG4gICAgICogQWRkIEVhY2ggZ3JpZCBpdGVtIHRvIE1hc29ucnkgYmFzZWQgb24gTWFzb255IGFkZFN0YXR1cyBwcm9wZXJ0eVxyXG4gICAgICogQHBhcmFtIHs/fSBlbGVtZW50IEVsZW1lbnQgLSBHcmlkIGl0ZW1cclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvKiogQHR5cGUgez99ICovXHJcbiAgICAgICAgdmFyIGFkZFN0YXR1cyA9IHRoaXMubWFzb25yeU9wdGlvbnMuYWRkU3RhdHVzLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgLy8gc2V0IG1hcmdpbiBib3R0b20gb2YgZ3V0dGVyIHZhbHVlLlxyXG4gICAgICAgIGlmICh0aGlzLm1hc29ucnlPcHRpb25zLmd1dHRlcikge1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1hcmdpbkJvdHRvbSA9IHRoaXMubWFzb25yeU9wdGlvbnMuZ3V0dGVyICsgJ3B4JztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZWwuaGFzQ2hpbGROb2RlcygpICYmIHRoaXMuZWwuY29udGFpbnMoZWxlbWVudCkpIHtcclxuICAgICAgICAgICAgdGhpcy5lbC5yZW1vdmVDaGlsZChlbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMudXNlSW1hZ2VzTG9hZGVkKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaW1hZ2VzTG9hZGVkKGVsZW1lbnQsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICsrX3RoaXMuaXRlbXNSZW5kZXJlZENvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLml0ZW1zLnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYXBwZW5kIG9yIHByZXBlbmQgYmFzZWQgb24gbWFzb25yeSBvcHRpb25cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWRkU3RhdHVzID09PSAncHJlcGVuZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLl9tc25yeS5pdGVtcy5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVsLmluc2VydEJlZm9yZShlbGVtZW50LCBfdGhpcy5fbXNucnkuaXRlbXNbMF0uZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbC5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhZGRTdGF0dXMgPT09ICdhcHBlbmQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVsLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZWwuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRkU3RhdHVzID09PSAncHJlcGVuZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5fbXNucnkuaXRlbXMubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX21zbnJ5LnByZXBlbmRlZChlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9tc25yeS5hcHBlbmRlZChlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhZGRTdGF0dXMgPT09ICdhcHBlbmQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fbXNucnkuYXBwZW5kZWQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fbXNucnkuYWRkSXRlbXMoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX21zbnJ5LmxheW91dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICArK190aGlzLml0ZW1zUmVuZGVyZWRDb3VudDtcclxuICAgICAgICAgICAgICAgIF90aGlzLml0ZW1zLnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWRkU3RhdHVzID09PSAncHJlcGVuZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX21zbnJ5Lml0ZW1zLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbC5pbnNlcnRCZWZvcmUoZWxlbWVudCwgX3RoaXMuX21zbnJ5Lml0ZW1zWzBdLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLl9tc25yeS5wcmVwZW5kZWQoaXRlbUVsZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZWwuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuX21zbnJ5LmFwcGVuZGVkKGl0ZW1FbGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhZGRTdGF0dXMgPT09ICdhcHBlbmQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZWwuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5fbXNucnkuYXBwZW5kZWQoaXRlbUVsZW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZWwuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5fbXNucnkuYWRkSXRlbXMoaXRlbUVsZW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZFN0YXR1cyA9PT0gJ3ByZXBlbmQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5fbXNucnkuaXRlbXMubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fbXNucnkucHJlcGVuZGVkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX21zbnJ5LmFwcGVuZGVkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFkZFN0YXR1cyA9PT0gJ2FwcGVuZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX21zbnJ5LmFwcGVuZGVkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX21zbnJ5LmFkZEl0ZW1zKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fbXNucnkubGF5b3V0KCk7XHJcbiAgICAgICAgICAgICAgICB9LCA1MCk7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRPRE86IHJlb3JkZXIgbWFzb25yeSBpdGVtcyBvbiBsb2FkXHJcbiAgICAgKiBAcGFyYW0gez99IGVsZW1lbnRcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5nTWFzb25yeUdyaWRTZXJ2aWNlLnByb3RvdHlwZS5hZGRPcmRlckl0ZW0gPSAvKipcclxuICAgICAqIFRPRE86IHJlb3JkZXIgbWFzb25yeSBpdGVtcyBvbiBsb2FkXHJcbiAgICAgKiBAcGFyYW0gez99IGVsZW1lbnRcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvKiogQHR5cGUgez99ICovXHJcbiAgICAgICAgdmFyIGFkZFN0YXR1cyA9IHRoaXMubWFzb25yeU9wdGlvbnMuYWRkU3RhdHVzLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgLy8gc2V0IG1hcmdpbiBib3R0b20gb2YgZ3V0dGVyIHZhbHVlLlxyXG4gICAgICAgIGlmICh0aGlzLm1hc29ucnlPcHRpb25zLmd1dHRlcikge1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1hcmdpbkJvdHRvbSA9IHRoaXMubWFzb25yeU9wdGlvbnMuZ3V0dGVyICsgJ3B4JztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMudXNlSW1hZ2VzTG9hZGVkKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaW1hZ2VzTG9hZGVkKGVsZW1lbnQsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWRkU3RhdHVzID09PSAncHJlcGVuZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX21zbnJ5Lml0ZW1zLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbC5pbnNlcnRCZWZvcmUoZWxlbWVudCwgX3RoaXMuX21zbnJ5Lml0ZW1zWzBdLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLl9tc25yeS5wcmVwZW5kZWQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbC5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5fbXNucnkuYXBwZW5kZWQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYWRkU3RhdHVzID09PSAnYXBwZW5kJykge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmVsLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuX21zbnJ5LmFwcGVuZGVkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZWwuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5fbXNucnkuYWRkSXRlbXMoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXRlbXNSZW5kZXJlZENvdW50ID09PSBfdGhpcy5pdGVtc0NvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGRTdGF0dXMgPT09ICdwcmVwZW5kJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLl9tc25yeS5pdGVtcy5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fbXNucnkucHJlcGVuZGVkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9tc25yeS5sYXlvdXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9tc25yeS5hcHBlbmRlZChlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fbXNucnkubGF5b3V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYWRkU3RhdHVzID09PSAnYXBwZW5kJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX21zbnJ5LmFwcGVuZGVkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX21zbnJ5LmxheW91dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX21zbnJ5LmFkZEl0ZW1zKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX21zbnJ5LmxheW91dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmUgb3JkZXIgTWFzb25yeSBpdGVtcyB0byBvcmlnaW5hbCBvcmRlclxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmdNYXNvbnJ5R3JpZFNlcnZpY2UucHJvdG90eXBlLnJlb3JkZXJNYXNvbnJ5SXRlbXMgPSAvKipcclxuICAgICAqIFJlIG9yZGVyIE1hc29ucnkgaXRlbXMgdG8gb3JpZ2luYWwgb3JkZXJcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLml0ZW1zUmVuZGVyZWRDb3VudCA9PT0gdGhpcy5pdGVtc0NvdW50KSB7XHJcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgICAgICAgICAgdmFyIHJlb3JkZXJJdGVtc18xID0gdGhpcy5pdGVtcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5kYXRhc2V0LmNvdW50IC0gYi5kYXRhc2V0LmNvdW50O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgd2hpbGUgKHRoaXMuZWwuaGFzQ2hpbGROb2RlcygpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsLnJlbW92ZUNoaWxkKHRoaXMuZWwubGFzdENoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlb3JkZXJJdGVtc18xLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbC5hcHBlbmRDaGlsZChpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fbXNucnkuYXBwZW5kZWQoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5fbXNucnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fbXNucnkucmVsb2FkSXRlbXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fbXNucnkubGF5b3V0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2V0IGFkZCBzdGF0dXMgdG8gTWFzb25yeSBiZWZvcmUgYWRkaW5nIG9yIGFwcGVuZGluZ1xyXG4gICAgICogQHBhcmFtIHs/fSB2YWx1ZSAnYXBwZW5kJyBvciAncHJlcGVuZCcgb3IgJ2FkZCdcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5nTWFzb25yeUdyaWRTZXJ2aWNlLnByb3RvdHlwZS5zZXRBZGRTdGF0dXMgPSAvKipcclxuICAgICAqIFNldCBhZGQgc3RhdHVzIHRvIE1hc29ucnkgYmVmb3JlIGFkZGluZyBvciBhcHBlbmRpbmdcclxuICAgICAqIEBwYXJhbSB7P30gdmFsdWUgJ2FwcGVuZCcgb3IgJ3ByZXBlbmQnIG9yICdhZGQnXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLm1hc29ucnlPcHRpb25zLmFkZFN0YXR1cyA9IHZhbHVlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIGdyaWQgaXRlbSBmcm9tIE1hc29ucnlcclxuICAgICAqIEBwYXJhbSB7P30gaXRlbSBFbGVtZW50OiBSZW1vdmVkIEdyaWQgSXRlbSBET01cclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5nTWFzb25yeUdyaWRTZXJ2aWNlLnByb3RvdHlwZS5yZW1vdmVJdGVtID0gLyoqXHJcbiAgICAgKiBSZW1vdmUgZ3JpZCBpdGVtIGZyb20gTWFzb25yeVxyXG4gICAgICogQHBhcmFtIHs/fSBpdGVtIEVsZW1lbnQ6IFJlbW92ZWQgR3JpZCBJdGVtIERPTVxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlQW5pbWF0aW9uKCk7XHJcbiAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlJyk7XHJcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgICAgICAgICAgdmFyIG9ic3YgPSByeGpzLk9ic2VydmFibGUuY3JlYXRlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtY291bnQnKTtcclxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IF90aGlzLl9tc25yeS5pdGVtcy5maW5kSW5kZXgoZnVuY3Rpb24gKG1hc29ucnlJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hc29ucnlJdGVtLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvdW50JykgPT09IGNvdW50O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiogQHR5cGUgez99ICovXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBfdGhpcy5fbXNucnkuaXRlbXNbaW5kZXhdLmVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uVHJhbnNpdGlvbkVuZChvYnNlcnZlciwgZWxlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmR4ID0gX3RoaXMuaXRlbXMuZmluZEluZGV4KGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmRhdGFzZXQuY291bnQgPT09IGl0ZW0uZGF0YXNldC5jb3VudDtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pdGVtcy5zcGxpY2UoaW5keCwgMSk7XHJcbiAgICAgICAgICAgICAgICB9LCAyMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gb2JzdjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJ4anMuZW1wdHkoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBmaXJzdCBncmlkIGl0ZW0gZnJvbSB0aGUgTWFzb25yeSBMaXN0XHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ01hc29ucnlHcmlkU2VydmljZS5wcm90b3R5cGUucmVtb3ZlRmlyc3RJdGVtID0gLyoqXHJcbiAgICAgKiBSZW1vdmUgZmlyc3QgZ3JpZCBpdGVtIGZyb20gdGhlIE1hc29ucnkgTGlzdFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVBbmltYXRpb24oKTtcclxuICAgICAgICBpZiAodGhpcy5fbXNucnkuaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21zbnJ5Lml0ZW1zWzBdLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0ZScpO1xyXG4gICAgICAgICAgICAvKiogQHR5cGUgez99ICovXHJcbiAgICAgICAgICAgIHZhciBvYnN2ID0gcnhqcy5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvL3NldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuX29uVHJhbnNpdGlvbkVuZChvYnNlcnZlciwgX3RoaXMuX21zbnJ5Lml0ZW1zWzBdLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaXRlbXMuc3BsaWNlKDAsIDEpO1xyXG4gICAgICAgICAgICAgICAgLy99LCAxMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gb2JzdjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJ4anMuZW1wdHkoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEVtcHR5IHRoZSBNYXNvbnJ5IGxpc3RcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5nTWFzb25yeUdyaWRTZXJ2aWNlLnByb3RvdHlwZS5yZW1vdmVBbGxJdGVtcyA9IC8qKlxyXG4gICAgICogRW1wdHkgdGhlIE1hc29ucnkgbGlzdFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVBbmltYXRpb24oKTtcclxuICAgICAgICAvKiogQHR5cGUgez99ICovXHJcbiAgICAgICAgdmFyIG9ic3YgPSByeGpzLk9ic2VydmFibGUuY3JlYXRlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuX21zbnJ5Lml0ZW1zLmZvckVhY2goZnVuY3Rpb24gKG1hc29ucnlJdGVtLCBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goeyBlbGVtZW50OiBtYXNvbnJ5SXRlbS5lbGVtZW50LCBpbmRleDogaW5kZXggfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkVHJhbnNpdGlvbihtYXNvbnJ5SXRlbS5lbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBfdGhpcy5fbXNucnkuaXRlbXNbX3RoaXMuX21zbnJ5Lml0ZW1zLmxlbmd0aCAtIDFdLmVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUgez99ICovXHJcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNpdGlvbkVuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KGl0ZW1zKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX21zbnJ5LnJlbG9hZEl0ZW1zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9tc25yeS5sYXlvdXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXRlbXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXRlbXNDb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLml0ZW1zUmVuZGVyZWRDb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHRyYW5zaXRpb25FbmQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCB0cmFuc2l0aW9uRW5kLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMubWFzb25yeU9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uID09PSBcIjBcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25FbmQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBvYnN2O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQWRkIHRyYW5zaXRpb24gZWZmZWN0IG9uIERPTSBOb2RlIHJlbW92YWxcclxuICAgICAqIEBwYXJhbSB7P30gZWxlbVxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmdNYXNvbnJ5R3JpZFNlcnZpY2UucHJvdG90eXBlLmFkZFRyYW5zaXRpb24gPSAvKipcclxuICAgICAqIEFkZCB0cmFuc2l0aW9uIGVmZmVjdCBvbiBET00gTm9kZSByZW1vdmFsXHJcbiAgICAgKiBAcGFyYW0gez99IGVsZW1cclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICAgICAgZWxlbS5zdHlsZS50cmFuc2l0aW9uID0gJ3RyYW5zZm9ybSAnICsgdGhpcy5tYXNvbnJ5T3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb24gKyAnLCBvcGFjaXR5ICcgKyB0aGlzLm1hc29ucnlPcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbjtcclxuICAgICAgICBlbGVtLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgwLjAwMSknO1xyXG4gICAgICAgIGVsZW0uc3R5bGUub3BhY2l0eSA9ICcwJztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIE9uIHRyYW5zaXRpb24gRW5kLCByZW1vdmUgZXZlbnRMaXN0ZW5lclxyXG4gICAgICogQHBhcmFtIHs/fSBvYnNlcnZlciBTdWJzY3JpYmVyPE1hc29ucnlHcmlkSXRlbT5cclxuICAgICAqIEBwYXJhbSB7P30gZWxlbVxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmdNYXNvbnJ5R3JpZFNlcnZpY2UucHJvdG90eXBlLl9vblRyYW5zaXRpb25FbmQgPSAvKipcclxuICAgICAqIE9uIHRyYW5zaXRpb24gRW5kLCByZW1vdmUgZXZlbnRMaXN0ZW5lclxyXG4gICAgICogQHBhcmFtIHs/fSBvYnNlcnZlciBTdWJzY3JpYmVyPE1hc29ucnlHcmlkSXRlbT5cclxuICAgICAqIEBwYXJhbSB7P30gZWxlbVxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gKG9ic2VydmVyLCBlbGVtKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoZWxlbSkge1xyXG4gICAgICAgICAgICB0aGlzLmFkZFRyYW5zaXRpb24oZWxlbSk7XHJcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25FbmRfMSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgICAgICAgICAgICAgIHZhciBpc2luZGV4ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoX3RoaXMuZWwuY2hpbGRyZW4pLmZpbmRJbmRleChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1jb3VudCcpID09PSBlbGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1jb3VudCcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNpbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KHsgZWxlbWVudDogZWxlbSwgaW5kZXg6IGlzaW5kZXggfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fbXNucnkucmVsb2FkSXRlbXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fbXNucnkubGF5b3V0KCk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMCk7XHJcbiAgICAgICAgICAgICAgICBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCB0cmFuc2l0aW9uRW5kXzEsIGZhbHNlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgdHJhbnNpdGlvbkVuZF8xLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE5nTWFzb25yeUdyaWRTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXHJcbiAgICAgICAgeyB0eXBlOiBjb3JlLkluamVjdGFibGUgfSxcclxuICAgIF07XHJcbiAgICAvKiogQG5vY29sbGFwc2UgKi9cclxuICAgIE5nTWFzb25yeUdyaWRTZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xyXG4gICAgICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBjb3JlLkluamVjdCwgYXJnczogW2NvcmUuUExBVEZPUk1fSUQsXSB9XSB9XHJcbiAgICBdOyB9O1xyXG4gICAgcmV0dXJuIE5nTWFzb25yeUdyaWRTZXJ2aWNlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGZpbGVvdmVydmlldyBhZGRlZCBieSB0c2lja2xlXHJcbiAqIEBzdXBwcmVzcyB7Y2hlY2tUeXBlcyxleHRyYVJlcXVpcmUsdXNlbGVzc0NvZGV9IGNoZWNrZWQgYnkgdHNjXHJcbiAqL1xyXG4vKipcclxuICogU2hhaWxlbmRyYSBLdW1hciA8c2hhaWx1LnNuaXN0QGdtYWlsLmNvbT5cclxuICogQGlnbm9yZVxyXG4gKi9cclxudmFyIE5nTWFzb25yeUdyaWRDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBOZ01hc29ucnlHcmlkQ29tcG9uZW50KF9wbGF0Zm9ybUlkLCBfZWxlbWVudCwgbWFzb25yeUdyaWRTZXJ2aWNlKSB7XHJcbiAgICAgICAgdGhpcy5fcGxhdGZvcm1JZCA9IF9wbGF0Zm9ybUlkO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBfZWxlbWVudDtcclxuICAgICAgICB0aGlzLm1hc29ucnlHcmlkU2VydmljZSA9IG1hc29ucnlHcmlkU2VydmljZTtcclxuICAgICAgICAvLyBJbnB1dHNcclxuICAgICAgICB0aGlzLm1hc29ucnlPcHRpb25zID0ge307XHJcbiAgICAgICAgdGhpcy51c2VBbmltYXRpb24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnVzZUltYWdlc0xvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIE91dHB1dHNcclxuICAgICAgICB0aGlzLmxheW91dENvbXBsZXRlID0gbmV3IGNvcmUuRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVDb21wbGV0ZSA9IG5ldyBjb3JlLkV2ZW50RW1pdHRlcigpO1xyXG4gICAgICAgIHRoaXMub25OZ01hc29ucnlJbml0ID0gbmV3IGNvcmUuRXZlbnRFbWl0dGVyKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5nTWFzb25yeUdyaWRDb21wb25lbnQucHJvdG90eXBlLm5nT25Jbml0ID0gLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5uYXRpdmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2dyaWQnKTtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVNYXNvbnJ5KCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ01hc29ucnlHcmlkQ29tcG9uZW50LnByb3RvdHlwZS5uZ0FmdGVyQ29udGVudEluaXQgPSAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBpbml0aWFsaXplIG1hc29ucnkgYWZ0ZXIgVmlldyBJbml0aWFsaXphdGlvblxyXG4gICAgICAgIC8vIHRoaXMuaW5pdGlhbGl6ZU1hc29ucnkoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5nTWFzb25yeUdyaWRDb21wb25lbnQucHJvdG90eXBlLm5nT25EZXN0cm95ID0gLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX21zbnJ5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21zbnJ5LmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgdGhpcy5tYXNvbnJ5R3JpZFNlcnZpY2Uub25EZXN0b3J5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmdNYXNvbnJ5R3JpZENvbXBvbmVudC5wcm90b3R5cGUubGF5b3V0ID0gLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuX21zbnJ5LmxheW91dCgpO1xyXG4gICAgICAgIH0sIDUwKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gZWxlbWVudFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmdNYXNvbnJ5R3JpZENvbXBvbmVudC5wcm90b3R5cGUucmVtb3ZlID0gLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGVsZW1lbnRcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fbXNucnkucmVtb3ZlKGVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMubGF5b3V0KCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGVsZW1lbnRcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5nTWFzb25yeUdyaWRDb21wb25lbnQucHJvdG90eXBlLmFkZCA9IC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBlbGVtZW50XHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMubWFzb25yeUdyaWRTZXJ2aWNlLmFkZChlbGVtZW50KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5nTWFzb25yeUdyaWRDb21wb25lbnQucHJvdG90eXBlLmluaXRpYWxpemVNYXNvbnJ5ID0gLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBpbml0aWFsaXplIE1hc29ucnkgd2l0aCBBbmltYXRpb24gZWZmZWN0c1xyXG4gICAgICAgIHRoaXMuX21zbnJ5ID0gdGhpcy5tYXNvbnJ5R3JpZFNlcnZpY2VcclxuICAgICAgICAgICAgLmluaXQodGhpcy5fZWxlbWVudC5uYXRpdmVFbGVtZW50LCB0aGlzLm1hc29ucnlPcHRpb25zLCB0aGlzLnVzZUFuaW1hdGlvbiwgdGhpcy5zY3JvbGxBbmltYXRpb25PcHRpb25zLCB0aGlzLnVzZUltYWdlc0xvYWRlZCk7XHJcbiAgICAgICAgLy8gQmluZCB0byBNYXNvbnJ5IGV2ZW50c1xyXG4gICAgICAgIHRoaXMuX21zbnJ5Lm9uKCdsYXlvdXRDb21wbGV0ZScsIGZ1bmN0aW9uIChpdGVtcykge1xyXG4gICAgICAgICAgICBfdGhpcy5sYXlvdXRDb21wbGV0ZS5lbWl0KGl0ZW1zKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9tc25yeS5vbigncmVtb3ZlQ29tcGxldGUnLCBmdW5jdGlvbiAoaXRlbXMpIHtcclxuICAgICAgICAgICAgX3RoaXMucmVtb3ZlQ29tcGxldGUuZW1pdChpdGVtcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fbXNucnkucmVtb3ZlQW5pbWF0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5tYXNvbnJ5R3JpZFNlcnZpY2UucmVtb3ZlQW5pbWF0aW9uKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLl9tc25yeS5zZXRBZGRTdGF0dXMgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgX3RoaXMubWFzb25yeUdyaWRTZXJ2aWNlLnNldEFkZFN0YXR1cyh2YWx1ZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLl9tc25yeS5yZW1vdmVJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm1hc29ucnlHcmlkU2VydmljZS5yZW1vdmVJdGVtKGl0ZW0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5fbXNucnkucmVtb3ZlRmlyc3RJdGVtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubWFzb25yeUdyaWRTZXJ2aWNlLnJlbW92ZUZpcnN0SXRlbSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5fbXNucnkucmVtb3ZlQWxsSXRlbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5tYXNvbnJ5R3JpZFNlcnZpY2UucmVtb3ZlQWxsSXRlbXMoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX21zbnJ5LnJlT3JkZXJJdGVtcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm1hc29ucnlHcmlkU2VydmljZS5yZW9yZGVyTWFzb25yeUl0ZW1zKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBlbWl0IE1hc29ucnkgSW5pdGlhbGl6YXRpb24gZXZlbnRcclxuICAgICAgICB0aGlzLm9uTmdNYXNvbnJ5SW5pdC5lbWl0KHRoaXMuX21zbnJ5KTtcclxuICAgICAgICB0aGlzLmxheW91dCgpO1xyXG4gICAgfTtcclxuICAgIE5nTWFzb25yeUdyaWRDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcclxuICAgICAgICB7IHR5cGU6IGNvcmUuQ29tcG9uZW50LCBhcmdzOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW25nLW1hc29ucnktZ3JpZF0sIG5nLW1hc29ucnktZ3JpZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8bmctY29udGVudD48L25nLWNvbnRlbnQ+JyxcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZXM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG5cXHRcXHQ6aG9zdCB7XFxuXFx0XFx0XFx0ZGlzcGxheTogYmxvY2s7XFxuXFx0XFx0fVxcblxcdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxdIH0sXHJcbiAgICBdO1xyXG4gICAgLyoqIEBub2NvbGxhcHNlICovXHJcbiAgICBOZ01hc29ucnlHcmlkQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xyXG4gICAgICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBjb3JlLkluamVjdCwgYXJnczogW2NvcmUuUExBVEZPUk1fSUQsXSB9XSB9LFxyXG4gICAgICAgIHsgdHlwZTogY29yZS5FbGVtZW50UmVmIH0sXHJcbiAgICAgICAgeyB0eXBlOiBOZ01hc29ucnlHcmlkU2VydmljZSB9XHJcbiAgICBdOyB9O1xyXG4gICAgTmdNYXNvbnJ5R3JpZENvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcclxuICAgICAgICBtYXNvbnJ5T3B0aW9uczogW3sgdHlwZTogY29yZS5JbnB1dCB9XSxcclxuICAgICAgICB1c2VBbmltYXRpb246IFt7IHR5cGU6IGNvcmUuSW5wdXQgfV0sXHJcbiAgICAgICAgc2Nyb2xsQW5pbWF0aW9uT3B0aW9uczogW3sgdHlwZTogY29yZS5JbnB1dCB9XSxcclxuICAgICAgICB1c2VJbWFnZXNMb2FkZWQ6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfV0sXHJcbiAgICAgICAgbGF5b3V0Q29tcGxldGU6IFt7IHR5cGU6IGNvcmUuT3V0cHV0IH1dLFxyXG4gICAgICAgIHJlbW92ZUNvbXBsZXRlOiBbeyB0eXBlOiBjb3JlLk91dHB1dCB9XSxcclxuICAgICAgICBvbk5nTWFzb25yeUluaXQ6IFt7IHR5cGU6IGNvcmUuT3V0cHV0IH1dXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE5nTWFzb25yeUdyaWRDb21wb25lbnQ7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcclxuICogQHN1cHByZXNzIHtjaGVja1R5cGVzLGV4dHJhUmVxdWlyZSx1c2VsZXNzQ29kZX0gY2hlY2tlZCBieSB0c2NcclxuICovXHJcbi8qKlxyXG4gKiBTaGFpbGVuZHJhIEt1bWFyIDxzaGFpbHUuc25pc3RAZ21haWwuY29tPlxyXG4gKiBAaWdub3JlXHJcbiAqL1xyXG52YXIgTmdNYXNvbnJ5R3JpZERpcmVjdGl2ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE5nTWFzb25yeUdyaWREaXJlY3RpdmUoX2VsZW1lbnQsIF9wYXJlbnQsIHBsYXRmb3JtSWQsIG1hc29ucnlHcmlkU2VydmljZSkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBfZWxlbWVudDtcclxuICAgICAgICB0aGlzLl9wYXJlbnQgPSBfcGFyZW50O1xyXG4gICAgICAgIHRoaXMucGxhdGZvcm1JZCA9IHBsYXRmb3JtSWQ7XHJcbiAgICAgICAgdGhpcy5tYXNvbnJ5R3JpZFNlcnZpY2UgPSBtYXNvbnJ5R3JpZFNlcnZpY2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIE5nTWFzb25yeUdyaWREaXJlY3RpdmUucHJvdG90eXBlLm5nT25Jbml0ID0gLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gdGhpcy5fcGFyZW50LmFkZCh0aGlzLl9lbGVtZW50Lm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQWRkIE1hc29ucnkgZ3JpZCBpdGVtIGFmdGVyIHZpZXcgaW5pdGlhbGl6YXRpb25cclxuICAgICAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgTWFzb25yeSBncmlkIGl0ZW0gYWZ0ZXIgdmlldyBpbml0aWFsaXphdGlvblxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmdNYXNvbnJ5R3JpZERpcmVjdGl2ZS5wcm90b3R5cGUubmdBZnRlclZpZXdJbml0ID0gLyoqXHJcbiAgICAgKiBBZGQgTWFzb25yeSBncmlkIGl0ZW0gYWZ0ZXIgdmlldyBpbml0aWFsaXphdGlvblxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChjb21tb24uaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5wbGF0Zm9ybUlkKSkge1xyXG4gICAgICAgICAgICB0aGlzLm1hc29ucnlHcmlkU2VydmljZS5pdGVtc0NvdW50Kys7XHJcbiAgICAgICAgICAgIC8vIHNldCBjb3VudCBhdHRyaWJ1dGUgZm9yIGV2ZXJ5IGdyaWQgaXRlbVxyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWNvdW50JywgdGhpcy5tYXNvbnJ5R3JpZFNlcnZpY2UuaXRlbXNDb3VudCk7XHJcbiAgICAgICAgICAgIC8vIGlmICh0aGlzLm1hc29ucnlHcmlkU2VydmljZS5tYXNvbnJ5T3B0aW9ucy5ob3Jpem9udGFsT3JkZXIpIHtcclxuICAgICAgICAgICAgLy8gICB0aGlzLm1hc29ucnlHcmlkU2VydmljZS5hZGRPcmRlckl0ZW0odGhpcy5fZWxlbWVudC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gICB0aGlzLl9wYXJlbnQuYWRkKHRoaXMuX2VsZW1lbnQubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgdGhpcy5fcGFyZW50LmFkZCh0aGlzLl9lbGVtZW50Lm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgICAgICB0aGlzLndhdGNoRm9ySHRtbENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBOZ01hc29ucnlHcmlkRGlyZWN0aXZlLnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogV2hlbiBIVE1MIGluIGJyaWNrIGNoYW5nZXMgZHluYW1pY2FsbHksIG9ic2VydmUgdGhhdCBhbmQgY2hhbmdlIGxheW91dFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgTmdNYXNvbnJ5R3JpZERpcmVjdGl2ZS5wcm90b3R5cGUud2F0Y2hGb3JIdG1sQ2hhbmdlcyA9IC8qKlxyXG4gICAgICogV2hlbiBIVE1MIGluIGJyaWNrIGNoYW5nZXMgZHluYW1pY2FsbHksIG9ic2VydmUgdGhhdCBhbmQgY2hhbmdlIGxheW91dFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIE11dGF0aW9uT2JzZXJ2ZXIgPSB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciB8fCB3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcclxuICAgICAgICBpZiAoTXV0YXRpb25PYnNlcnZlcikge1xyXG4gICAgICAgICAgICAvKiogKlxyXG4gICAgICAgICAgICAgKiBXYXRjaCBmb3IgYW55IGNoYW5nZXMgdG8gc3VidHJlZVxyXG4gICAgICAgICAgICAgIEB0eXBlIHs/fSAqL1xyXG4gICAgICAgICAgICB2YXIgc2VsZl8xID0gdGhpcztcclxuICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAobXV0YXRpb25zLCBvYnNlcnZlckZyb21FbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmXzEuX3BhcmVudC5sYXlvdXQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIGRlZmluZSB3aGF0IGVsZW1lbnQgc2hvdWxkIGJlIG9ic2VydmVkIGJ5IHRoZSBvYnNlcnZlclxyXG4gICAgICAgICAgICAvLyBhbmQgd2hhdCB0eXBlcyBvZiBtdXRhdGlvbnMgdHJpZ2dlciB0aGUgY2FsbGJhY2tcclxuICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLl9lbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIHtcclxuICAgICAgICAgICAgICAgIHN1YnRyZWU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjaGlsZExpc3Q6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE5nTWFzb25yeUdyaWREaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcclxuICAgICAgICB7IHR5cGU6IGNvcmUuRGlyZWN0aXZlLCBhcmdzOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpkaXJlY3RpdmUtc2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1tuZy1tYXNvbnJ5LWdyaWQtaXRlbV0sIG5nLW1hc29ucnktZ3JpZC1pdGVtJ1xyXG4gICAgICAgICAgICAgICAgfSxdIH0sXHJcbiAgICBdO1xyXG4gICAgLyoqIEBub2NvbGxhcHNlICovXHJcbiAgICBOZ01hc29ucnlHcmlkRGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xyXG4gICAgICAgIHsgdHlwZTogY29yZS5FbGVtZW50UmVmIH0sXHJcbiAgICAgICAgeyB0eXBlOiBOZ01hc29ucnlHcmlkQ29tcG9uZW50LCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBjb3JlLkluamVjdCwgYXJnczogW2NvcmUuZm9yd2FyZFJlZihmdW5jdGlvbiAoKSB7IHJldHVybiBOZ01hc29ucnlHcmlkQ29tcG9uZW50OyB9KSxdIH1dIH0sXHJcbiAgICAgICAgeyB0eXBlOiB1bmRlZmluZWQsIGRlY29yYXRvcnM6IFt7IHR5cGU6IGNvcmUuSW5qZWN0LCBhcmdzOiBbY29yZS5QTEFURk9STV9JRCxdIH1dIH0sXHJcbiAgICAgICAgeyB0eXBlOiBOZ01hc29ucnlHcmlkU2VydmljZSB9XHJcbiAgICBdOyB9O1xyXG4gICAgcmV0dXJuIE5nTWFzb25yeUdyaWREaXJlY3RpdmU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcclxuICogQHN1cHByZXNzIHtjaGVja1R5cGVzLGV4dHJhUmVxdWlyZSx1c2VsZXNzQ29kZX0gY2hlY2tlZCBieSB0c2NcclxuICovXHJcbi8qKlxyXG4gKiBTaGFpbGVuZHJhIEt1bWFyIDxzaGFpbHUuc25pc3RAZ21haWwuY29tPlxyXG4gKiBAaWdub3JlXHJcbiAqL1xyXG52YXIgTmdNYXNvbnJ5R3JpZE1vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE5nTWFzb25yeUdyaWRNb2R1bGUoKSB7XHJcbiAgICB9XHJcbiAgICBOZ01hc29ucnlHcmlkTW9kdWxlLmRlY29yYXRvcnMgPSBbXHJcbiAgICAgICAgeyB0eXBlOiBjb3JlLk5nTW9kdWxlLCBhcmdzOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgIGltcG9ydHM6IFtjb21tb24uQ29tbW9uTW9kdWxlXSxcclxuICAgICAgICAgICAgICAgICAgICBleHBvcnRzOiBbTmdNYXNvbnJ5R3JpZENvbXBvbmVudCwgTmdNYXNvbnJ5R3JpZERpcmVjdGl2ZV0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbTmdNYXNvbnJ5R3JpZENvbXBvbmVudCwgTmdNYXNvbnJ5R3JpZERpcmVjdGl2ZV0sXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbTmdNYXNvbnJ5R3JpZFNlcnZpY2VdXHJcbiAgICAgICAgICAgICAgICB9LF0gfSxcclxuICAgIF07XHJcbiAgICByZXR1cm4gTmdNYXNvbnJ5R3JpZE1vZHVsZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgYWRkZWQgYnkgdHNpY2tsZVxyXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXMsZXh0cmFSZXF1aXJlLHVzZWxlc3NDb2RlfSBjaGVja2VkIGJ5IHRzY1xyXG4gKi9cclxuLyoqXHJcbiAqIE1hc29ucnkgR3JpZCBpdGVtXHJcbiAqL1xyXG52YXIgTWFzb25yeUdyaWRJdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWFzb25yeUdyaWRJdGVtKCkge1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE1hc29ucnlHcmlkSXRlbTtcclxufSgpKTtcclxuLyoqXHJcbiAqIE1hc29ucnkgT3B0aW9uc1xyXG4gKiBAcmVjb3JkXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIE1hc29ucnkgT2JqZWN0XHJcbiAqL1xyXG52YXIgTWFzb25yeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1hc29ucnkoc2VsZWN0b3IsIG9wdGlvbnMpIHtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIE1hc29ucnk7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBTY3JvbGwgQW5pbWF0aW9uIG9wdGlvbnNcclxuICogQHJlY29yZFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBpbnRlcmZhY2UgZm9yIGFuIGltYWdlIGN1cnJlbnRseSBsb2FkaW5nIG9yIGNvbXBsZXRlZFxyXG4gKiBAcmVjb3JkXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEByZWNvcmRcclxuICovXHJcblxyXG4vKipcclxuICogQHJlY29yZFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAcmVjb3JkXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEByZWNvcmRcclxuICovXHJcblxyXG4vKipcclxuICogQHJlY29yZFxyXG4gKi9cblxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgYWRkZWQgYnkgdHNpY2tsZVxyXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXMsZXh0cmFSZXF1aXJlLHVzZWxlc3NDb2RlfSBjaGVja2VkIGJ5IHRzY1xyXG4gKi9cblxuZXhwb3J0cy5OZ01hc29ucnlHcmlkTW9kdWxlID0gTmdNYXNvbnJ5R3JpZE1vZHVsZTtcbmV4cG9ydHMuTmdNYXNvbnJ5R3JpZENvbXBvbmVudCA9IE5nTWFzb25yeUdyaWRDb21wb25lbnQ7XG5leHBvcnRzLk5nTWFzb25yeUdyaWREaXJlY3RpdmUgPSBOZ01hc29ucnlHcmlkRGlyZWN0aXZlO1xuZXhwb3J0cy5OZ01hc29ucnlHcmlkU2VydmljZSA9IE5nTWFzb25yeUdyaWRTZXJ2aWNlO1xuZXhwb3J0cy5NYXNvbnJ5ID0gTWFzb25yeTtcbmV4cG9ydHMuTWFzb25yeUdyaWRJdGVtID0gTWFzb25yeUdyaWRJdGVtO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG59KSkpO1xuIl19","/*!\n * Outlayer v2.1.1\n * the brains and guts of a layout library\n * MIT license\n */\n\n( function( window, factory ) {\n  'use strict';\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( [\n        'ev-emitter/ev-emitter',\n        'get-size/get-size',\n        'fizzy-ui-utils/utils',\n        './item'\n      ],\n      function( EvEmitter, getSize, utils, Item ) {\n        return factory( window, EvEmitter, getSize, utils, Item);\n      }\n    );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      window,\n      require('ev-emitter'),\n      require('get-size'),\n      require('fizzy-ui-utils'),\n      require('./item')\n    );\n  } else {\n    // browser global\n    window.Outlayer = factory(\n      window,\n      window.EvEmitter,\n      window.getSize,\n      window.fizzyUIUtils,\n      window.Outlayer.Item\n    );\n  }\n\n}( window, function factory( window, EvEmitter, getSize, utils, Item ) {\n'use strict';\n\n// ----- vars ----- //\n\nvar console = window.console;\nvar jQuery = window.jQuery;\nvar noop = function() {};\n\n// -------------------------- Outlayer -------------------------- //\n\n// globally unique identifiers\nvar GUID = 0;\n// internal store of all Outlayer intances\nvar instances = {};\n\n\n/**\n * @param {Element, String} element\n * @param {Object} options\n * @constructor\n */\nfunction Outlayer( element, options ) {\n  var queryElement = utils.getQueryElement( element );\n  if ( !queryElement ) {\n    if ( console ) {\n      console.error( 'Bad element for ' + this.constructor.namespace +\n        ': ' + ( queryElement || element ) );\n    }\n    return;\n  }\n  this.element = queryElement;\n  // add jQuery\n  if ( jQuery ) {\n    this.$element = jQuery( this.element );\n  }\n\n  // options\n  this.options = utils.extend( {}, this.constructor.defaults );\n  this.option( options );\n\n  // add id for Outlayer.getFromElement\n  var id = ++GUID;\n  this.element.outlayerGUID = id; // expando\n  instances[ id ] = this; // associate via id\n\n  // kick it off\n  this._create();\n\n  var isInitLayout = this._getOption('initLayout');\n  if ( isInitLayout ) {\n    this.layout();\n  }\n}\n\n// settings are for internal use only\nOutlayer.namespace = 'outlayer';\nOutlayer.Item = Item;\n\n// default options\nOutlayer.defaults = {\n  containerStyle: {\n    position: 'relative'\n  },\n  initLayout: true,\n  originLeft: true,\n  originTop: true,\n  resize: true,\n  resizeContainer: true,\n  // item options\n  transitionDuration: '0.4s',\n  hiddenStyle: {\n    opacity: 0,\n    transform: 'scale(0.001)'\n  },\n  visibleStyle: {\n    opacity: 1,\n    transform: 'scale(1)'\n  }\n};\n\nvar proto = Outlayer.prototype;\n// inherit EvEmitter\nutils.extend( proto, EvEmitter.prototype );\n\n/**\n * set options\n * @param {Object} opts\n */\nproto.option = function( opts ) {\n  utils.extend( this.options, opts );\n};\n\n/**\n * get backwards compatible option value, check old name\n */\nproto._getOption = function( option ) {\n  var oldOption = this.constructor.compatOptions[ option ];\n  return oldOption && this.options[ oldOption ] !== undefined ?\n    this.options[ oldOption ] : this.options[ option ];\n};\n\nOutlayer.compatOptions = {\n  // currentName: oldName\n  initLayout: 'isInitLayout',\n  horizontal: 'isHorizontal',\n  layoutInstant: 'isLayoutInstant',\n  originLeft: 'isOriginLeft',\n  originTop: 'isOriginTop',\n  resize: 'isResizeBound',\n  resizeContainer: 'isResizingContainer'\n};\n\nproto._create = function() {\n  // get items from children\n  this.reloadItems();\n  // elements that affect layout, but are not laid out\n  this.stamps = [];\n  this.stamp( this.options.stamp );\n  // set container style\n  utils.extend( this.element.style, this.options.containerStyle );\n\n  // bind resize method\n  var canBindResize = this._getOption('resize');\n  if ( canBindResize ) {\n    this.bindResize();\n  }\n};\n\n// goes through all children again and gets bricks in proper order\nproto.reloadItems = function() {\n  // collection of item elements\n  this.items = this._itemize( this.element.children );\n};\n\n\n/**\n * turn elements into Outlayer.Items to be used in layout\n * @param {Array or NodeList or HTMLElement} elems\n * @returns {Array} items - collection of new Outlayer Items\n */\nproto._itemize = function( elems ) {\n\n  var itemElems = this._filterFindItemElements( elems );\n  var Item = this.constructor.Item;\n\n  // create new Outlayer Items for collection\n  var items = [];\n  for ( var i=0; i < itemElems.length; i++ ) {\n    var elem = itemElems[i];\n    var item = new Item( elem, this );\n    items.push( item );\n  }\n\n  return items;\n};\n\n/**\n * get item elements to be used in layout\n * @param {Array or NodeList or HTMLElement} elems\n * @returns {Array} items - item elements\n */\nproto._filterFindItemElements = function( elems ) {\n  return utils.filterFindElements( elems, this.options.itemSelector );\n};\n\n/**\n * getter method for getting item elements\n * @returns {Array} elems - collection of item elements\n */\nproto.getItemElements = function() {\n  return this.items.map( function( item ) {\n    return item.element;\n  });\n};\n\n// ----- init & layout ----- //\n\n/**\n * lays out all items\n */\nproto.layout = function() {\n  this._resetLayout();\n  this._manageStamps();\n\n  // don't animate first layout\n  var layoutInstant = this._getOption('layoutInstant');\n  var isInstant = layoutInstant !== undefined ?\n    layoutInstant : !this._isLayoutInited;\n  this.layoutItems( this.items, isInstant );\n\n  // flag for initalized\n  this._isLayoutInited = true;\n};\n\n// _init is alias for layout\nproto._init = proto.layout;\n\n/**\n * logic before any new layout\n */\nproto._resetLayout = function() {\n  this.getSize();\n};\n\n\nproto.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * get measurement from option, for columnWidth, rowHeight, gutter\n * if option is String -> get element from selector string, & get size of element\n * if option is Element -> get size of element\n * else use option as a number\n *\n * @param {String} measurement\n * @param {String} size - width or height\n * @private\n */\nproto._getMeasurement = function( measurement, size ) {\n  var option = this.options[ measurement ];\n  var elem;\n  if ( !option ) {\n    // default to 0\n    this[ measurement ] = 0;\n  } else {\n    // use option as an element\n    if ( typeof option == 'string' ) {\n      elem = this.element.querySelector( option );\n    } else if ( option instanceof HTMLElement ) {\n      elem = option;\n    }\n    // use size of element, if element\n    this[ measurement ] = elem ? getSize( elem )[ size ] : option;\n  }\n};\n\n/**\n * layout a collection of item elements\n * @api public\n */\nproto.layoutItems = function( items, isInstant ) {\n  items = this._getItemsForLayout( items );\n\n  this._layoutItems( items, isInstant );\n\n  this._postLayout();\n};\n\n/**\n * get the items to be laid out\n * you may want to skip over some items\n * @param {Array} items\n * @returns {Array} items\n */\nproto._getItemsForLayout = function( items ) {\n  return items.filter( function( item ) {\n    return !item.isIgnored;\n  });\n};\n\n/**\n * layout items\n * @param {Array} items\n * @param {Boolean} isInstant\n */\nproto._layoutItems = function( items, isInstant ) {\n  this._emitCompleteOnItems( 'layout', items );\n\n  if ( !items || !items.length ) {\n    // no items, emit event with empty array\n    return;\n  }\n\n  var queue = [];\n\n  items.forEach( function( item ) {\n    // get x/y object from method\n    var position = this._getItemLayoutPosition( item );\n    // enqueue\n    position.item = item;\n    position.isInstant = isInstant || item.isLayoutInstant;\n    queue.push( position );\n  }, this );\n\n  this._processLayoutQueue( queue );\n};\n\n/**\n * get item layout position\n * @param {Outlayer.Item} item\n * @returns {Object} x and y position\n */\nproto._getItemLayoutPosition = function( /* item */ ) {\n  return {\n    x: 0,\n    y: 0\n  };\n};\n\n/**\n * iterate over array and position each item\n * Reason being - separating this logic prevents 'layout invalidation'\n * thx @paul_irish\n * @param {Array} queue\n */\nproto._processLayoutQueue = function( queue ) {\n  this.updateStagger();\n  queue.forEach( function( obj, i ) {\n    this._positionItem( obj.item, obj.x, obj.y, obj.isInstant, i );\n  }, this );\n};\n\n// set stagger from option in milliseconds number\nproto.updateStagger = function() {\n  var stagger = this.options.stagger;\n  if ( stagger === null || stagger === undefined ) {\n    this.stagger = 0;\n    return;\n  }\n  this.stagger = getMilliseconds( stagger );\n  return this.stagger;\n};\n\n/**\n * Sets position of item in DOM\n * @param {Outlayer.Item} item\n * @param {Number} x - horizontal position\n * @param {Number} y - vertical position\n * @param {Boolean} isInstant - disables transitions\n */\nproto._positionItem = function( item, x, y, isInstant, i ) {\n  if ( isInstant ) {\n    // if not transition, just set CSS\n    item.goTo( x, y );\n  } else {\n    item.stagger( i * this.stagger );\n    item.moveTo( x, y );\n  }\n};\n\n/**\n * Any logic you want to do after each layout,\n * i.e. size the container\n */\nproto._postLayout = function() {\n  this.resizeContainer();\n};\n\nproto.resizeContainer = function() {\n  var isResizingContainer = this._getOption('resizeContainer');\n  if ( !isResizingContainer ) {\n    return;\n  }\n  var size = this._getContainerSize();\n  if ( size ) {\n    this._setContainerMeasure( size.width, true );\n    this._setContainerMeasure( size.height, false );\n  }\n};\n\n/**\n * Sets width or height of container if returned\n * @returns {Object} size\n *   @param {Number} width\n *   @param {Number} height\n */\nproto._getContainerSize = noop;\n\n/**\n * @param {Number} measure - size of width or height\n * @param {Boolean} isWidth\n */\nproto._setContainerMeasure = function( measure, isWidth ) {\n  if ( measure === undefined ) {\n    return;\n  }\n\n  var elemSize = this.size;\n  // add padding and border width if border box\n  if ( elemSize.isBorderBox ) {\n    measure += isWidth ? elemSize.paddingLeft + elemSize.paddingRight +\n      elemSize.borderLeftWidth + elemSize.borderRightWidth :\n      elemSize.paddingBottom + elemSize.paddingTop +\n      elemSize.borderTopWidth + elemSize.borderBottomWidth;\n  }\n\n  measure = Math.max( measure, 0 );\n  this.element.style[ isWidth ? 'width' : 'height' ] = measure + 'px';\n};\n\n/**\n * emit eventComplete on a collection of items events\n * @param {String} eventName\n * @param {Array} items - Outlayer.Items\n */\nproto._emitCompleteOnItems = function( eventName, items ) {\n  var _this = this;\n  function onComplete() {\n    _this.dispatchEvent( eventName + 'Complete', null, [ items ] );\n  }\n\n  var count = items.length;\n  if ( !items || !count ) {\n    onComplete();\n    return;\n  }\n\n  var doneCount = 0;\n  function tick() {\n    doneCount++;\n    if ( doneCount == count ) {\n      onComplete();\n    }\n  }\n\n  // bind callback\n  items.forEach( function( item ) {\n    item.once( eventName, tick );\n  });\n};\n\n/**\n * emits events via EvEmitter and jQuery events\n * @param {String} type - name of event\n * @param {Event} event - original event\n * @param {Array} args - extra arguments\n */\nproto.dispatchEvent = function( type, event, args ) {\n  // add original event to arguments\n  var emitArgs = event ? [ event ].concat( args ) : args;\n  this.emitEvent( type, emitArgs );\n\n  if ( jQuery ) {\n    // set this.$element\n    this.$element = this.$element || jQuery( this.element );\n    if ( event ) {\n      // create jQuery event\n      var $event = jQuery.Event( event );\n      $event.type = type;\n      this.$element.trigger( $event, args );\n    } else {\n      // just trigger with type if no event available\n      this.$element.trigger( type, args );\n    }\n  }\n};\n\n// -------------------------- ignore & stamps -------------------------- //\n\n\n/**\n * keep item in collection, but do not lay it out\n * ignored items do not get skipped in layout\n * @param {Element} elem\n */\nproto.ignore = function( elem ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    item.isIgnored = true;\n  }\n};\n\n/**\n * return item to layout collection\n * @param {Element} elem\n */\nproto.unignore = function( elem ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    delete item.isIgnored;\n  }\n};\n\n/**\n * adds elements to stamps\n * @param {NodeList, Array, Element, or String} elems\n */\nproto.stamp = function( elems ) {\n  elems = this._find( elems );\n  if ( !elems ) {\n    return;\n  }\n\n  this.stamps = this.stamps.concat( elems );\n  // ignore\n  elems.forEach( this.ignore, this );\n};\n\n/**\n * removes elements to stamps\n * @param {NodeList, Array, or Element} elems\n */\nproto.unstamp = function( elems ) {\n  elems = this._find( elems );\n  if ( !elems ){\n    return;\n  }\n\n  elems.forEach( function( elem ) {\n    // filter out removed stamp elements\n    utils.removeFrom( this.stamps, elem );\n    this.unignore( elem );\n  }, this );\n};\n\n/**\n * finds child elements\n * @param {NodeList, Array, Element, or String} elems\n * @returns {Array} elems\n */\nproto._find = function( elems ) {\n  if ( !elems ) {\n    return;\n  }\n  // if string, use argument as selector string\n  if ( typeof elems == 'string' ) {\n    elems = this.element.querySelectorAll( elems );\n  }\n  elems = utils.makeArray( elems );\n  return elems;\n};\n\nproto._manageStamps = function() {\n  if ( !this.stamps || !this.stamps.length ) {\n    return;\n  }\n\n  this._getBoundingRect();\n\n  this.stamps.forEach( this._manageStamp, this );\n};\n\n// update boundingLeft / Top\nproto._getBoundingRect = function() {\n  // get bounding rect for container element\n  var boundingRect = this.element.getBoundingClientRect();\n  var size = this.size;\n  this._boundingRect = {\n    left: boundingRect.left + size.paddingLeft + size.borderLeftWidth,\n    top: boundingRect.top + size.paddingTop + size.borderTopWidth,\n    right: boundingRect.right - ( size.paddingRight + size.borderRightWidth ),\n    bottom: boundingRect.bottom - ( size.paddingBottom + size.borderBottomWidth )\n  };\n};\n\n/**\n * @param {Element} stamp\n**/\nproto._manageStamp = noop;\n\n/**\n * get x/y position of element relative to container element\n * @param {Element} elem\n * @returns {Object} offset - has left, top, right, bottom\n */\nproto._getElementOffset = function( elem ) {\n  var boundingRect = elem.getBoundingClientRect();\n  var thisRect = this._boundingRect;\n  var size = getSize( elem );\n  var offset = {\n    left: boundingRect.left - thisRect.left - size.marginLeft,\n    top: boundingRect.top - thisRect.top - size.marginTop,\n    right: thisRect.right - boundingRect.right - size.marginRight,\n    bottom: thisRect.bottom - boundingRect.bottom - size.marginBottom\n  };\n  return offset;\n};\n\n// -------------------------- resize -------------------------- //\n\n// enable event handlers for listeners\n// i.e. resize -> onresize\nproto.handleEvent = utils.handleEvent;\n\n/**\n * Bind layout to window resizing\n */\nproto.bindResize = function() {\n  window.addEventListener( 'resize', this );\n  this.isResizeBound = true;\n};\n\n/**\n * Unbind layout to window resizing\n */\nproto.unbindResize = function() {\n  window.removeEventListener( 'resize', this );\n  this.isResizeBound = false;\n};\n\nproto.onresize = function() {\n  this.resize();\n};\n\nutils.debounceMethod( Outlayer, 'onresize', 100 );\n\nproto.resize = function() {\n  // don't trigger if size did not change\n  // or if resize was unbound. See #9\n  if ( !this.isResizeBound || !this.needsResizeLayout() ) {\n    return;\n  }\n\n  this.layout();\n};\n\n/**\n * check if layout is needed post layout\n * @returns Boolean\n */\nproto.needsResizeLayout = function() {\n  var size = getSize( this.element );\n  // check that this.size and size are there\n  // IE8 triggers resize on body size change, so they might not be\n  var hasSizes = this.size && size;\n  return hasSizes && size.innerWidth !== this.size.innerWidth;\n};\n\n// -------------------------- methods -------------------------- //\n\n/**\n * add items to Outlayer instance\n * @param {Array or NodeList or Element} elems\n * @returns {Array} items - Outlayer.Items\n**/\nproto.addItems = function( elems ) {\n  var items = this._itemize( elems );\n  // add items to collection\n  if ( items.length ) {\n    this.items = this.items.concat( items );\n  }\n  return items;\n};\n\n/**\n * Layout newly-appended item elements\n * @param {Array or NodeList or Element} elems\n */\nproto.appended = function( elems ) {\n  var items = this.addItems( elems );\n  if ( !items.length ) {\n    return;\n  }\n  // layout and reveal just the new items\n  this.layoutItems( items, true );\n  this.reveal( items );\n};\n\n/**\n * Layout prepended elements\n * @param {Array or NodeList or Element} elems\n */\nproto.prepended = function( elems ) {\n  var items = this._itemize( elems );\n  if ( !items.length ) {\n    return;\n  }\n  // add items to beginning of collection\n  var previousItems = this.items.slice(0);\n  this.items = items.concat( previousItems );\n  // start new layout\n  this._resetLayout();\n  this._manageStamps();\n  // layout new stuff without transition\n  this.layoutItems( items, true );\n  this.reveal( items );\n  // layout previous items\n  this.layoutItems( previousItems );\n};\n\n/**\n * reveal a collection of items\n * @param {Array of Outlayer.Items} items\n */\nproto.reveal = function( items ) {\n  this._emitCompleteOnItems( 'reveal', items );\n  if ( !items || !items.length ) {\n    return;\n  }\n  var stagger = this.updateStagger();\n  items.forEach( function( item, i ) {\n    item.stagger( i * stagger );\n    item.reveal();\n  });\n};\n\n/**\n * hide a collection of items\n * @param {Array of Outlayer.Items} items\n */\nproto.hide = function( items ) {\n  this._emitCompleteOnItems( 'hide', items );\n  if ( !items || !items.length ) {\n    return;\n  }\n  var stagger = this.updateStagger();\n  items.forEach( function( item, i ) {\n    item.stagger( i * stagger );\n    item.hide();\n  });\n};\n\n/**\n * reveal item elements\n * @param {Array}, {Element}, {NodeList} items\n */\nproto.revealItemElements = function( elems ) {\n  var items = this.getItems( elems );\n  this.reveal( items );\n};\n\n/**\n * hide item elements\n * @param {Array}, {Element}, {NodeList} items\n */\nproto.hideItemElements = function( elems ) {\n  var items = this.getItems( elems );\n  this.hide( items );\n};\n\n/**\n * get Outlayer.Item, given an Element\n * @param {Element} elem\n * @param {Function} callback\n * @returns {Outlayer.Item} item\n */\nproto.getItem = function( elem ) {\n  // loop through items to get the one that matches\n  for ( var i=0; i < this.items.length; i++ ) {\n    var item = this.items[i];\n    if ( item.element == elem ) {\n      // return item\n      return item;\n    }\n  }\n};\n\n/**\n * get collection of Outlayer.Items, given Elements\n * @param {Array} elems\n * @returns {Array} items - Outlayer.Items\n */\nproto.getItems = function( elems ) {\n  elems = utils.makeArray( elems );\n  var items = [];\n  elems.forEach( function( elem ) {\n    var item = this.getItem( elem );\n    if ( item ) {\n      items.push( item );\n    }\n  }, this );\n\n  return items;\n};\n\n/**\n * remove element(s) from instance and DOM\n * @param {Array or NodeList or Element} elems\n */\nproto.remove = function( elems ) {\n  var removeItems = this.getItems( elems );\n\n  this._emitCompleteOnItems( 'remove', removeItems );\n\n  // bail if no items to remove\n  if ( !removeItems || !removeItems.length ) {\n    return;\n  }\n\n  removeItems.forEach( function( item ) {\n    item.remove();\n    // remove item from collection\n    utils.removeFrom( this.items, item );\n  }, this );\n};\n\n// ----- destroy ----- //\n\n// remove and disable Outlayer instance\nproto.destroy = function() {\n  // clean up dynamic styles\n  var style = this.element.style;\n  style.height = '';\n  style.position = '';\n  style.width = '';\n  // destroy items\n  this.items.forEach( function( item ) {\n    item.destroy();\n  });\n\n  this.unbindResize();\n\n  var id = this.element.outlayerGUID;\n  delete instances[ id ]; // remove reference to instance by id\n  delete this.element.outlayerGUID;\n  // remove data for jQuery\n  if ( jQuery ) {\n    jQuery.removeData( this.element, this.constructor.namespace );\n  }\n\n};\n\n// -------------------------- data -------------------------- //\n\n/**\n * get Outlayer instance from element\n * @param {Element} elem\n * @returns {Outlayer}\n */\nOutlayer.data = function( elem ) {\n  elem = utils.getQueryElement( elem );\n  var id = elem && elem.outlayerGUID;\n  return id && instances[ id ];\n};\n\n\n// -------------------------- create Outlayer class -------------------------- //\n\n/**\n * create a layout class\n * @param {String} namespace\n */\nOutlayer.create = function( namespace, options ) {\n  // sub-class Outlayer\n  var Layout = subclass( Outlayer );\n  // apply new options and compatOptions\n  Layout.defaults = utils.extend( {}, Outlayer.defaults );\n  utils.extend( Layout.defaults, options );\n  Layout.compatOptions = utils.extend( {}, Outlayer.compatOptions  );\n\n  Layout.namespace = namespace;\n\n  Layout.data = Outlayer.data;\n\n  // sub-class Item\n  Layout.Item = subclass( Item );\n\n  // -------------------------- declarative -------------------------- //\n\n  utils.htmlInit( Layout, namespace );\n\n  // -------------------------- jQuery bridge -------------------------- //\n\n  // make into jQuery plugin\n  if ( jQuery && jQuery.bridget ) {\n    jQuery.bridget( namespace, Layout );\n  }\n\n  return Layout;\n};\n\nfunction subclass( Parent ) {\n  function SubClass() {\n    Parent.apply( this, arguments );\n  }\n\n  SubClass.prototype = Object.create( Parent.prototype );\n  SubClass.prototype.constructor = SubClass;\n\n  return SubClass;\n}\n\n// ----- helpers ----- //\n\n// how many milliseconds are in each unit\nvar msUnits = {\n  ms: 1,\n  s: 1000\n};\n\n// munge time-like parameter into millisecond number\n// '0.4s' -> 40\nfunction getMilliseconds( time ) {\n  if ( typeof time == 'number' ) {\n    return time;\n  }\n  var matches = time.match( /(^\\d*\\.?\\d*)(\\w*)/ );\n  var num = matches && matches[1];\n  var unit = matches && matches[2];\n  if ( !num.length ) {\n    return 0;\n  }\n  num = parseFloat( num );\n  var mult = msUnits[ unit ] || 1;\n  return num * mult;\n}\n\n// ----- fin ----- //\n\n// back in global\nOutlayer.Item = Item;\n\nreturn Outlayer;\n\n}));\n","/**\n * Outlayer Item\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( [\n        'ev-emitter/ev-emitter',\n        'get-size/get-size'\n      ],\n      factory\n    );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      require('ev-emitter'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Outlayer = {};\n    window.Outlayer.Item = factory(\n      window.EvEmitter,\n      window.getSize\n    );\n  }\n\n}( window, function factory( EvEmitter, getSize ) {\n'use strict';\n\n// ----- helpers ----- //\n\nfunction isEmptyObj( obj ) {\n  for ( var prop in obj ) {\n    return false;\n  }\n  prop = null;\n  return true;\n}\n\n// -------------------------- CSS3 support -------------------------- //\n\n\nvar docElemStyle = document.documentElement.style;\n\nvar transitionProperty = typeof docElemStyle.transition == 'string' ?\n  'transition' : 'WebkitTransition';\nvar transformProperty = typeof docElemStyle.transform == 'string' ?\n  'transform' : 'WebkitTransform';\n\nvar transitionEndEvent = {\n  WebkitTransition: 'webkitTransitionEnd',\n  transition: 'transitionend'\n}[ transitionProperty ];\n\n// cache all vendor properties that could have vendor prefix\nvar vendorProperties = {\n  transform: transformProperty,\n  transition: transitionProperty,\n  transitionDuration: transitionProperty + 'Duration',\n  transitionProperty: transitionProperty + 'Property',\n  transitionDelay: transitionProperty + 'Delay'\n};\n\n// -------------------------- Item -------------------------- //\n\nfunction Item( element, layout ) {\n  if ( !element ) {\n    return;\n  }\n\n  this.element = element;\n  // parent layout class, i.e. Masonry, Isotope, or Packery\n  this.layout = layout;\n  this.position = {\n    x: 0,\n    y: 0\n  };\n\n  this._create();\n}\n\n// inherit EvEmitter\nvar proto = Item.prototype = Object.create( EvEmitter.prototype );\nproto.constructor = Item;\n\nproto._create = function() {\n  // transition objects\n  this._transn = {\n    ingProperties: {},\n    clean: {},\n    onEnd: {}\n  };\n\n  this.css({\n    position: 'absolute'\n  });\n};\n\n// trigger specified handler for event type\nproto.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nproto.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * apply CSS styles to element\n * @param {Object} style\n */\nproto.css = function( style ) {\n  var elemStyle = this.element.style;\n\n  for ( var prop in style ) {\n    // use vendor property if available\n    var supportedProp = vendorProperties[ prop ] || prop;\n    elemStyle[ supportedProp ] = style[ prop ];\n  }\n};\n\n // measure position, and sets it\nproto.getPosition = function() {\n  var style = getComputedStyle( this.element );\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n  var xValue = style[ isOriginLeft ? 'left' : 'right' ];\n  var yValue = style[ isOriginTop ? 'top' : 'bottom' ];\n  var x = parseFloat( xValue );\n  var y = parseFloat( yValue );\n  // convert percent to pixels\n  var layoutSize = this.layout.size;\n  if ( xValue.indexOf('%') != -1 ) {\n    x = ( x / 100 ) * layoutSize.width;\n  }\n  if ( yValue.indexOf('%') != -1 ) {\n    y = ( y / 100 ) * layoutSize.height;\n  }\n  // clean up 'auto' or other non-integer values\n  x = isNaN( x ) ? 0 : x;\n  y = isNaN( y ) ? 0 : y;\n  // remove padding from measurement\n  x -= isOriginLeft ? layoutSize.paddingLeft : layoutSize.paddingRight;\n  y -= isOriginTop ? layoutSize.paddingTop : layoutSize.paddingBottom;\n\n  this.position.x = x;\n  this.position.y = y;\n};\n\n// set settled position, apply padding\nproto.layoutPosition = function() {\n  var layoutSize = this.layout.size;\n  var style = {};\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n\n  // x\n  var xPadding = isOriginLeft ? 'paddingLeft' : 'paddingRight';\n  var xProperty = isOriginLeft ? 'left' : 'right';\n  var xResetProperty = isOriginLeft ? 'right' : 'left';\n\n  var x = this.position.x + layoutSize[ xPadding ];\n  // set in percentage or pixels\n  style[ xProperty ] = this.getXValue( x );\n  // reset other property\n  style[ xResetProperty ] = '';\n\n  // y\n  var yPadding = isOriginTop ? 'paddingTop' : 'paddingBottom';\n  var yProperty = isOriginTop ? 'top' : 'bottom';\n  var yResetProperty = isOriginTop ? 'bottom' : 'top';\n\n  var y = this.position.y + layoutSize[ yPadding ];\n  // set in percentage or pixels\n  style[ yProperty ] = this.getYValue( y );\n  // reset other property\n  style[ yResetProperty ] = '';\n\n  this.css( style );\n  this.emitEvent( 'layout', [ this ] );\n};\n\nproto.getXValue = function( x ) {\n  var isHorizontal = this.layout._getOption('horizontal');\n  return this.layout.options.percentPosition && !isHorizontal ?\n    ( ( x / this.layout.size.width ) * 100 ) + '%' : x + 'px';\n};\n\nproto.getYValue = function( y ) {\n  var isHorizontal = this.layout._getOption('horizontal');\n  return this.layout.options.percentPosition && isHorizontal ?\n    ( ( y / this.layout.size.height ) * 100 ) + '%' : y + 'px';\n};\n\nproto._transitionTo = function( x, y ) {\n  this.getPosition();\n  // get current x & y from top/left\n  var curX = this.position.x;\n  var curY = this.position.y;\n\n  var didNotMove = x == this.position.x && y == this.position.y;\n\n  // save end position\n  this.setPosition( x, y );\n\n  // if did not move and not transitioning, just go to layout\n  if ( didNotMove && !this.isTransitioning ) {\n    this.layoutPosition();\n    return;\n  }\n\n  var transX = x - curX;\n  var transY = y - curY;\n  var transitionStyle = {};\n  transitionStyle.transform = this.getTranslate( transX, transY );\n\n  this.transition({\n    to: transitionStyle,\n    onTransitionEnd: {\n      transform: this.layoutPosition\n    },\n    isCleaning: true\n  });\n};\n\nproto.getTranslate = function( x, y ) {\n  // flip cooridinates if origin on right or bottom\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n  x = isOriginLeft ? x : -x;\n  y = isOriginTop ? y : -y;\n  return 'translate3d(' + x + 'px, ' + y + 'px, 0)';\n};\n\n// non transition + transform support\nproto.goTo = function( x, y ) {\n  this.setPosition( x, y );\n  this.layoutPosition();\n};\n\nproto.moveTo = proto._transitionTo;\n\nproto.setPosition = function( x, y ) {\n  this.position.x = parseFloat( x );\n  this.position.y = parseFloat( y );\n};\n\n// ----- transition ----- //\n\n/**\n * @param {Object} style - CSS\n * @param {Function} onTransitionEnd\n */\n\n// non transition, just trigger callback\nproto._nonTransition = function( args ) {\n  this.css( args.to );\n  if ( args.isCleaning ) {\n    this._removeStyles( args.to );\n  }\n  for ( var prop in args.onTransitionEnd ) {\n    args.onTransitionEnd[ prop ].call( this );\n  }\n};\n\n/**\n * proper transition\n * @param {Object} args - arguments\n *   @param {Object} to - style to transition to\n *   @param {Object} from - style to start transition from\n *   @param {Boolean} isCleaning - removes transition styles after transition\n *   @param {Function} onTransitionEnd - callback\n */\nproto.transition = function( args ) {\n  // redirect to nonTransition if no transition duration\n  if ( !parseFloat( this.layout.options.transitionDuration ) ) {\n    this._nonTransition( args );\n    return;\n  }\n\n  var _transition = this._transn;\n  // keep track of onTransitionEnd callback by css property\n  for ( var prop in args.onTransitionEnd ) {\n    _transition.onEnd[ prop ] = args.onTransitionEnd[ prop ];\n  }\n  // keep track of properties that are transitioning\n  for ( prop in args.to ) {\n    _transition.ingProperties[ prop ] = true;\n    // keep track of properties to clean up when transition is done\n    if ( args.isCleaning ) {\n      _transition.clean[ prop ] = true;\n    }\n  }\n\n  // set from styles\n  if ( args.from ) {\n    this.css( args.from );\n    // force redraw. http://blog.alexmaccaw.com/css-transitions\n    var h = this.element.offsetHeight;\n    // hack for JSHint to hush about unused var\n    h = null;\n  }\n  // enable transition\n  this.enableTransition( args.to );\n  // set styles that are transitioning\n  this.css( args.to );\n\n  this.isTransitioning = true;\n\n};\n\n// dash before all cap letters, including first for\n// WebkitTransform => -webkit-transform\nfunction toDashedAll( str ) {\n  return str.replace( /([A-Z])/g, function( $1 ) {\n    return '-' + $1.toLowerCase();\n  });\n}\n\nvar transitionProps = 'opacity,' + toDashedAll( transformProperty );\n\nproto.enableTransition = function(/* style */) {\n  // HACK changing transitionProperty during a transition\n  // will cause transition to jump\n  if ( this.isTransitioning ) {\n    return;\n  }\n\n  // make `transition: foo, bar, baz` from style object\n  // HACK un-comment this when enableTransition can work\n  // while a transition is happening\n  // var transitionValues = [];\n  // for ( var prop in style ) {\n  //   // dash-ify camelCased properties like WebkitTransition\n  //   prop = vendorProperties[ prop ] || prop;\n  //   transitionValues.push( toDashedAll( prop ) );\n  // }\n  // munge number to millisecond, to match stagger\n  var duration = this.layout.options.transitionDuration;\n  duration = typeof duration == 'number' ? duration + 'ms' : duration;\n  // enable transition styles\n  this.css({\n    transitionProperty: transitionProps,\n    transitionDuration: duration,\n    transitionDelay: this.staggerDelay || 0\n  });\n  // listen for transition end event\n  this.element.addEventListener( transitionEndEvent, this, false );\n};\n\n// ----- events ----- //\n\nproto.onwebkitTransitionEnd = function( event ) {\n  this.ontransitionend( event );\n};\n\nproto.onotransitionend = function( event ) {\n  this.ontransitionend( event );\n};\n\n// properties that I munge to make my life easier\nvar dashedVendorProperties = {\n  '-webkit-transform': 'transform'\n};\n\nproto.ontransitionend = function( event ) {\n  // disregard bubbled events from children\n  if ( event.target !== this.element ) {\n    return;\n  }\n  var _transition = this._transn;\n  // get property name of transitioned property, convert to prefix-free\n  var propertyName = dashedVendorProperties[ event.propertyName ] || event.propertyName;\n\n  // remove property that has completed transitioning\n  delete _transition.ingProperties[ propertyName ];\n  // check if any properties are still transitioning\n  if ( isEmptyObj( _transition.ingProperties ) ) {\n    // all properties have completed transitioning\n    this.disableTransition();\n  }\n  // clean style\n  if ( propertyName in _transition.clean ) {\n    // clean up style\n    this.element.style[ event.propertyName ] = '';\n    delete _transition.clean[ propertyName ];\n  }\n  // trigger onTransitionEnd callback\n  if ( propertyName in _transition.onEnd ) {\n    var onTransitionEnd = _transition.onEnd[ propertyName ];\n    onTransitionEnd.call( this );\n    delete _transition.onEnd[ propertyName ];\n  }\n\n  this.emitEvent( 'transitionEnd', [ this ] );\n};\n\nproto.disableTransition = function() {\n  this.removeTransitionStyles();\n  this.element.removeEventListener( transitionEndEvent, this, false );\n  this.isTransitioning = false;\n};\n\n/**\n * removes style property from element\n * @param {Object} style\n**/\nproto._removeStyles = function( style ) {\n  // clean up transition styles\n  var cleanStyle = {};\n  for ( var prop in style ) {\n    cleanStyle[ prop ] = '';\n  }\n  this.css( cleanStyle );\n};\n\nvar cleanTransitionStyle = {\n  transitionProperty: '',\n  transitionDuration: '',\n  transitionDelay: ''\n};\n\nproto.removeTransitionStyles = function() {\n  // remove transition\n  this.css( cleanTransitionStyle );\n};\n\n// ----- stagger ----- //\n\nproto.stagger = function( delay ) {\n  delay = isNaN( delay ) ? 0 : delay;\n  this.staggerDelay = delay + 'ms';\n};\n\n// ----- show/hide/remove ----- //\n\n// remove element from DOM\nproto.removeElem = function() {\n  this.element.parentNode.removeChild( this.element );\n  // remove display: none\n  this.css({ display: '' });\n  this.emitEvent( 'remove', [ this ] );\n};\n\nproto.remove = function() {\n  // just remove element if no transition support or no transition\n  if ( !transitionProperty || !parseFloat( this.layout.options.transitionDuration ) ) {\n    this.removeElem();\n    return;\n  }\n\n  // start transition\n  this.once( 'transitionEnd', function() {\n    this.removeElem();\n  });\n  this.hide();\n};\n\nproto.reveal = function() {\n  delete this.isHidden;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('visibleStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onRevealTransitionEnd;\n\n  this.transition({\n    from: options.hiddenStyle,\n    to: options.visibleStyle,\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nproto.onRevealTransitionEnd = function() {\n  // check if still visible\n  // during transition, item may have been hidden\n  if ( !this.isHidden ) {\n    this.emitEvent('reveal');\n  }\n};\n\n/**\n * get style property use for hide/reveal transition end\n * @param {String} styleProperty - hiddenStyle/visibleStyle\n * @returns {String}\n */\nproto.getHideRevealTransitionEndProperty = function( styleProperty ) {\n  var optionStyle = this.layout.options[ styleProperty ];\n  // use opacity\n  if ( optionStyle.opacity ) {\n    return 'opacity';\n  }\n  // get first property\n  for ( var prop in optionStyle ) {\n    return prop;\n  }\n};\n\nproto.hide = function() {\n  // set flag\n  this.isHidden = true;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('hiddenStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onHideTransitionEnd;\n\n  this.transition({\n    from: options.visibleStyle,\n    to: options.hiddenStyle,\n    // keep hidden stuff hidden\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nproto.onHideTransitionEnd = function() {\n  // check if still hidden\n  // during transition, item may have been un-hidden\n  if ( this.isHidden ) {\n    this.css({ display: 'none' });\n    this.emitEvent('hide');\n  }\n};\n\nproto.destroy = function() {\n  this.css({\n    position: '',\n    left: '',\n    right: '',\n    top: '',\n    bottom: '',\n    transition: '',\n    transform: ''\n  });\n};\n\nreturn Item;\n\n}));\n","/*!\n * getSize v2.0.3\n * measure size of elements\n * MIT license\n */\n\n/* jshint browser: true, strict: true, undef: true, unused: true */\n/* globals console: false */\n\n( function( window, factory ) {\n  /* jshint strict: false */ /* globals define, module */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.getSize = factory();\n  }\n\n})( window, function factory() {\n'use strict';\n\n// -------------------------- helpers -------------------------- //\n\n// get a number from a string, not a percentage\nfunction getStyleSize( value ) {\n  var num = parseFloat( value );\n  // not a percent like '100%', and a number\n  var isValid = value.indexOf('%') == -1 && !isNaN( num );\n  return isValid && num;\n}\n\nfunction noop() {}\n\nvar logError = typeof console == 'undefined' ? noop :\n  function( message ) {\n    console.error( message );\n  };\n\n// -------------------------- measurements -------------------------- //\n\nvar measurements = [\n  'paddingLeft',\n  'paddingRight',\n  'paddingTop',\n  'paddingBottom',\n  'marginLeft',\n  'marginRight',\n  'marginTop',\n  'marginBottom',\n  'borderLeftWidth',\n  'borderRightWidth',\n  'borderTopWidth',\n  'borderBottomWidth'\n];\n\nvar measurementsLength = measurements.length;\n\nfunction getZeroSize() {\n  var size = {\n    width: 0,\n    height: 0,\n    innerWidth: 0,\n    innerHeight: 0,\n    outerWidth: 0,\n    outerHeight: 0\n  };\n  for ( var i=0; i < measurementsLength; i++ ) {\n    var measurement = measurements[i];\n    size[ measurement ] = 0;\n  }\n  return size;\n}\n\n// -------------------------- getStyle -------------------------- //\n\n/**\n * getStyle, get style of element, check for Firefox bug\n * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n */\nfunction getStyle( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    logError( 'Style returned ' + style +\n      '. Are you running this code in a hidden iframe on Firefox? ' +\n      'See https://bit.ly/getsizebug1' );\n  }\n  return style;\n}\n\n// -------------------------- setup -------------------------- //\n\nvar isSetup = false;\n\nvar isBoxSizeOuter;\n\n/**\n * setup\n * check isBoxSizerOuter\n * do on first getSize() rather than on page load for Firefox bug\n */\nfunction setup() {\n  // setup once\n  if ( isSetup ) {\n    return;\n  }\n  isSetup = true;\n\n  // -------------------------- box sizing -------------------------- //\n\n  /**\n   * Chrome & Safari measure the outer-width on style.width on border-box elems\n   * IE11 & Firefox<29 measures the inner-width\n   */\n  var div = document.createElement('div');\n  div.style.width = '200px';\n  div.style.padding = '1px 2px 3px 4px';\n  div.style.borderStyle = 'solid';\n  div.style.borderWidth = '1px 2px 3px 4px';\n  div.style.boxSizing = 'border-box';\n\n  var body = document.body || document.documentElement;\n  body.appendChild( div );\n  var style = getStyle( div );\n  // round value for browser zoom. desandro/masonry#928\n  isBoxSizeOuter = Math.round( getStyleSize( style.width ) ) == 200;\n  getSize.isBoxSizeOuter = isBoxSizeOuter;\n\n  body.removeChild( div );\n}\n\n// -------------------------- getSize -------------------------- //\n\nfunction getSize( elem ) {\n  setup();\n\n  // use querySeletor if elem is string\n  if ( typeof elem == 'string' ) {\n    elem = document.querySelector( elem );\n  }\n\n  // do not proceed on non-objects\n  if ( !elem || typeof elem != 'object' || !elem.nodeType ) {\n    return;\n  }\n\n  var style = getStyle( elem );\n\n  // if hidden, everything is 0\n  if ( style.display == 'none' ) {\n    return getZeroSize();\n  }\n\n  var size = {};\n  size.width = elem.offsetWidth;\n  size.height = elem.offsetHeight;\n\n  var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\n\n  // get all measurements\n  for ( var i=0; i < measurementsLength; i++ ) {\n    var measurement = measurements[i];\n    var value = style[ measurement ];\n    var num = parseFloat( value );\n    // any 'auto', 'medium' value will be 0\n    size[ measurement ] = !isNaN( num ) ? num : 0;\n  }\n\n  var paddingWidth = size.paddingLeft + size.paddingRight;\n  var paddingHeight = size.paddingTop + size.paddingBottom;\n  var marginWidth = size.marginLeft + size.marginRight;\n  var marginHeight = size.marginTop + size.marginBottom;\n  var borderWidth = size.borderLeftWidth + size.borderRightWidth;\n  var borderHeight = size.borderTopWidth + size.borderBottomWidth;\n\n  var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\n\n  // overwrite width and height if we can get it from style\n  var styleWidth = getStyleSize( style.width );\n  if ( styleWidth !== false ) {\n    size.width = styleWidth +\n      // add padding and border unless it's already including it\n      ( isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth );\n  }\n\n  var styleHeight = getStyleSize( style.height );\n  if ( styleHeight !== false ) {\n    size.height = styleHeight +\n      // add padding and border unless it's already including it\n      ( isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight );\n  }\n\n  size.innerWidth = size.width - ( paddingWidth + borderWidth );\n  size.innerHeight = size.height - ( paddingHeight + borderHeight );\n\n  size.outerWidth = size.width + marginWidth;\n  size.outerHeight = size.height + marginHeight;\n\n  return size;\n}\n\nreturn getSize;\n\n});\n","/**\n * Fizzy UI utils v2.0.7\n * MIT license\n */\n\n/*jshint browser: true, undef: true, unused: true, strict: true */\n\n( function( window, factory ) {\n  // universal module definition\n  /*jshint strict: false */ /*globals define, module, require */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'desandro-matches-selector/matches-selector'\n    ], function( matchesSelector ) {\n      return factory( window, matchesSelector );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('desandro-matches-selector')\n    );\n  } else {\n    // browser global\n    window.fizzyUIUtils = factory(\n      window,\n      window.matchesSelector\n    );\n  }\n\n}( window, function factory( window, matchesSelector ) {\n\n'use strict';\n\nvar utils = {};\n\n// ----- extend ----- //\n\n// extends objects\nutils.extend = function( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n};\n\n// ----- modulo ----- //\n\nutils.modulo = function( num, div ) {\n  return ( ( num % div ) + div ) % div;\n};\n\n// ----- makeArray ----- //\n\nvar arraySlice = Array.prototype.slice;\n\n// turn element or nodeList into an array\nutils.makeArray = function( obj ) {\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    return obj;\n  }\n  // return empty array if undefined or null. #6\n  if ( obj === null || obj === undefined ) {\n    return [];\n  }\n\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  if ( isArrayLike ) {\n    // convert nodeList to array\n    return arraySlice.call( obj );\n  }\n\n  // array of single index\n  return [ obj ];\n};\n\n// ----- removeFrom ----- //\n\nutils.removeFrom = function( ary, obj ) {\n  var index = ary.indexOf( obj );\n  if ( index != -1 ) {\n    ary.splice( index, 1 );\n  }\n};\n\n// ----- getParent ----- //\n\nutils.getParent = function( elem, selector ) {\n  while ( elem.parentNode && elem != document.body ) {\n    elem = elem.parentNode;\n    if ( matchesSelector( elem, selector ) ) {\n      return elem;\n    }\n  }\n};\n\n// ----- getQueryElement ----- //\n\n// use element as selector string\nutils.getQueryElement = function( elem ) {\n  if ( typeof elem == 'string' ) {\n    return document.querySelector( elem );\n  }\n  return elem;\n};\n\n// ----- handleEvent ----- //\n\n// enable .ontype to trigger from .addEventListener( elem, 'type' )\nutils.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\n// ----- filterFindElements ----- //\n\nutils.filterFindElements = function( elems, selector ) {\n  // make array of elems\n  elems = utils.makeArray( elems );\n  var ffElems = [];\n\n  elems.forEach( function( elem ) {\n    // check that elem is an actual element\n    if ( !( elem instanceof HTMLElement ) ) {\n      return;\n    }\n    // add elem if no selector\n    if ( !selector ) {\n      ffElems.push( elem );\n      return;\n    }\n    // filter & find items if we have a selector\n    // filter\n    if ( matchesSelector( elem, selector ) ) {\n      ffElems.push( elem );\n    }\n    // find children\n    var childElems = elem.querySelectorAll( selector );\n    // concat childElems to filterFound array\n    for ( var i=0; i < childElems.length; i++ ) {\n      ffElems.push( childElems[i] );\n    }\n  });\n\n  return ffElems;\n};\n\n// ----- debounceMethod ----- //\n\nutils.debounceMethod = function( _class, methodName, threshold ) {\n  threshold = threshold || 100;\n  // original method\n  var method = _class.prototype[ methodName ];\n  var timeoutName = methodName + 'Timeout';\n\n  _class.prototype[ methodName ] = function() {\n    var timeout = this[ timeoutName ];\n    clearTimeout( timeout );\n\n    var args = arguments;\n    var _this = this;\n    this[ timeoutName ] = setTimeout( function() {\n      method.apply( _this, args );\n      delete _this[ timeoutName ];\n    }, threshold );\n  };\n};\n\n// ----- docReady ----- //\n\nutils.docReady = function( callback ) {\n  var readyState = document.readyState;\n  if ( readyState == 'complete' || readyState == 'interactive' ) {\n    // do async to allow for other scripts to run. metafizzy/flickity#441\n    setTimeout( callback );\n  } else {\n    document.addEventListener( 'DOMContentLoaded', callback );\n  }\n};\n\n// ----- htmlInit ----- //\n\n// http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\nutils.toDashed = function( str ) {\n  return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\n    return $1 + '-' + $2;\n  }).toLowerCase();\n};\n\nvar console = window.console;\n/**\n * allow user to initialize classes via [data-namespace] or .js-namespace class\n * htmlInit( Widget, 'widgetName' )\n * options are parsed from data-namespace-options\n */\nutils.htmlInit = function( WidgetClass, namespace ) {\n  utils.docReady( function() {\n    var dashedNamespace = utils.toDashed( namespace );\n    var dataAttr = 'data-' + dashedNamespace;\n    var dataAttrElems = document.querySelectorAll( '[' + dataAttr + ']' );\n    var jsDashElems = document.querySelectorAll( '.js-' + dashedNamespace );\n    var elems = utils.makeArray( dataAttrElems )\n      .concat( utils.makeArray( jsDashElems ) );\n    var dataOptionsAttr = dataAttr + '-options';\n    var jQuery = window.jQuery;\n\n    elems.forEach( function( elem ) {\n      var attr = elem.getAttribute( dataAttr ) ||\n        elem.getAttribute( dataOptionsAttr );\n      var options;\n      try {\n        options = attr && JSON.parse( attr );\n      } catch ( error ) {\n        // log error, do not initialize\n        if ( console ) {\n          console.error( 'Error parsing ' + dataAttr + ' on ' + elem.className +\n          ': ' + error );\n        }\n        return;\n      }\n      // initialize\n      var instance = new WidgetClass( elem, options );\n      // make available via $().data('namespace')\n      if ( jQuery ) {\n        jQuery.data( elem, namespace, instance );\n      }\n    });\n\n  });\n};\n\n// -----  ----- //\n\nreturn utils;\n\n}));\n","/*!\n * Masonry v4.2.2\n * Cascading grid layout library\n * https://masonry.desandro.com\n * MIT License\n * by David DeSandro\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        'outlayer/outlayer',\n        'get-size/get-size'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('outlayer'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Masonry = factory(\n      window.Outlayer,\n      window.getSize\n    );\n  }\n\n}( window, function factory( Outlayer, getSize ) {\n\n'use strict';\n\n// -------------------------- masonryDefinition -------------------------- //\n\n  // create an Outlayer layout class\n  var Masonry = Outlayer.create('masonry');\n  // isFitWidth -> fitWidth\n  Masonry.compatOptions.fitWidth = 'isFitWidth';\n\n  var proto = Masonry.prototype;\n\n  proto._resetLayout = function() {\n    this.getSize();\n    this._getMeasurement( 'columnWidth', 'outerWidth' );\n    this._getMeasurement( 'gutter', 'outerWidth' );\n    this.measureColumns();\n\n    // reset column Y\n    this.colYs = [];\n    for ( var i=0; i < this.cols; i++ ) {\n      this.colYs.push( 0 );\n    }\n\n    this.maxY = 0;\n    this.horizontalColIndex = 0;\n  };\n\n  proto.measureColumns = function() {\n    this.getContainerWidth();\n    // if columnWidth is 0, default to outerWidth of first item\n    if ( !this.columnWidth ) {\n      var firstItem = this.items[0];\n      var firstItemElem = firstItem && firstItem.element;\n      // columnWidth fall back to item of first element\n      this.columnWidth = firstItemElem && getSize( firstItemElem ).outerWidth ||\n        // if first elem has no width, default to size of container\n        this.containerWidth;\n    }\n\n    var columnWidth = this.columnWidth += this.gutter;\n\n    // calculate columns\n    var containerWidth = this.containerWidth + this.gutter;\n    var cols = containerWidth / columnWidth;\n    // fix rounding errors, typically with gutters\n    var excess = columnWidth - containerWidth % columnWidth;\n    // if overshoot is less than a pixel, round up, otherwise floor it\n    var mathMethod = excess && excess < 1 ? 'round' : 'floor';\n    cols = Math[ mathMethod ]( cols );\n    this.cols = Math.max( cols, 1 );\n  };\n\n  proto.getContainerWidth = function() {\n    // container is parent if fit width\n    var isFitWidth = this._getOption('fitWidth');\n    var container = isFitWidth ? this.element.parentNode : this.element;\n    // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n    var size = getSize( container );\n    this.containerWidth = size && size.innerWidth;\n  };\n\n  proto._getItemLayoutPosition = function( item ) {\n    item.getSize();\n    // how many columns does this brick span\n    var remainder = item.size.outerWidth % this.columnWidth;\n    var mathMethod = remainder && remainder < 1 ? 'round' : 'ceil';\n    // round if off by 1 pixel, otherwise use ceil\n    var colSpan = Math[ mathMethod ]( item.size.outerWidth / this.columnWidth );\n    colSpan = Math.min( colSpan, this.cols );\n    // use horizontal or top column position\n    var colPosMethod = this.options.horizontalOrder ?\n      '_getHorizontalColPosition' : '_getTopColPosition';\n    var colPosition = this[ colPosMethod ]( colSpan, item );\n    // position the brick\n    var position = {\n      x: this.columnWidth * colPosition.col,\n      y: colPosition.y\n    };\n    // apply setHeight to necessary columns\n    var setHeight = colPosition.y + item.size.outerHeight;\n    var setMax = colSpan + colPosition.col;\n    for ( var i = colPosition.col; i < setMax; i++ ) {\n      this.colYs[i] = setHeight;\n    }\n\n    return position;\n  };\n\n  proto._getTopColPosition = function( colSpan ) {\n    var colGroup = this._getTopColGroup( colSpan );\n    // get the minimum Y value from the columns\n    var minimumY = Math.min.apply( Math, colGroup );\n\n    return {\n      col: colGroup.indexOf( minimumY ),\n      y: minimumY,\n    };\n  };\n\n  /**\n   * @param {Number} colSpan - number of columns the element spans\n   * @returns {Array} colGroup\n   */\n  proto._getTopColGroup = function( colSpan ) {\n    if ( colSpan < 2 ) {\n      // if brick spans only one column, use all the column Ys\n      return this.colYs;\n    }\n\n    var colGroup = [];\n    // how many different places could this brick fit horizontally\n    var groupCount = this.cols + 1 - colSpan;\n    // for each group potential horizontal position\n    for ( var i = 0; i < groupCount; i++ ) {\n      colGroup[i] = this._getColGroupY( i, colSpan );\n    }\n    return colGroup;\n  };\n\n  proto._getColGroupY = function( col, colSpan ) {\n    if ( colSpan < 2 ) {\n      return this.colYs[ col ];\n    }\n    // make an array of colY values for that one group\n    var groupColYs = this.colYs.slice( col, col + colSpan );\n    // and get the max value of the array\n    return Math.max.apply( Math, groupColYs );\n  };\n\n  // get column position based on horizontal index. #873\n  proto._getHorizontalColPosition = function( colSpan, item ) {\n    var col = this.horizontalColIndex % this.cols;\n    var isOver = colSpan > 1 && col + colSpan > this.cols;\n    // shift to next row if item can't fit on current row\n    col = isOver ? 0 : col;\n    // don't let zero-size items take up space\n    var hasSize = item.size.outerWidth && item.size.outerHeight;\n    this.horizontalColIndex = hasSize ? col + colSpan : this.horizontalColIndex;\n\n    return {\n      col: col,\n      y: this._getColGroupY( col, colSpan ),\n    };\n  };\n\n  proto._manageStamp = function( stamp ) {\n    var stampSize = getSize( stamp );\n    var offset = this._getElementOffset( stamp );\n    // get the columns that this stamp affects\n    var isOriginLeft = this._getOption('originLeft');\n    var firstX = isOriginLeft ? offset.left : offset.right;\n    var lastX = firstX + stampSize.outerWidth;\n    var firstCol = Math.floor( firstX / this.columnWidth );\n    firstCol = Math.max( 0, firstCol );\n    var lastCol = Math.floor( lastX / this.columnWidth );\n    // lastCol should not go over if multiple of columnWidth #425\n    lastCol -= lastX % this.columnWidth ? 0 : 1;\n    lastCol = Math.min( this.cols - 1, lastCol );\n    // set colYs to bottom of the stamp\n\n    var isOriginTop = this._getOption('originTop');\n    var stampMaxY = ( isOriginTop ? offset.top : offset.bottom ) +\n      stampSize.outerHeight;\n    for ( var i = firstCol; i <= lastCol; i++ ) {\n      this.colYs[i] = Math.max( stampMaxY, this.colYs[i] );\n    }\n  };\n\n  proto._getContainerSize = function() {\n    this.maxY = Math.max.apply( Math, this.colYs );\n    var size = {\n      height: this.maxY\n    };\n\n    if ( this._getOption('fitWidth') ) {\n      size.width = this._getContainerFitWidth();\n    }\n\n    return size;\n  };\n\n  proto._getContainerFitWidth = function() {\n    var unusedCols = 0;\n    // count unused columns\n    var i = this.cols;\n    while ( --i ) {\n      if ( this.colYs[i] !== 0 ) {\n        break;\n      }\n      unusedCols++;\n    }\n    // fit container to columns that have been used\n    return ( this.cols - unusedCols ) * this.columnWidth - this.gutter;\n  };\n\n  proto.needsResizeLayout = function() {\n    var previousWidth = this.containerWidth;\n    this.getContainerWidth();\n    return previousWidth != this.containerWidth;\n  };\n\n  return Masonry;\n\n}));\n","/*!\n * imagesLoaded v4.1.4\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) { 'use strict';\n  // universal module definition\n\n  /*global define: false, module: false, require: false */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'ev-emitter/ev-emitter'\n    ], function( EvEmitter ) {\n      return factory( window, EvEmitter );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('ev-emitter')\n    );\n  } else {\n    // browser global\n    window.imagesLoaded = factory(\n      window,\n      window.EvEmitter\n    );\n  }\n\n})( typeof window !== 'undefined' ? window : this,\n\n// --------------------------  factory -------------------------- //\n\nfunction factory( window, EvEmitter ) {\n\n'use strict';\n\nvar $ = window.jQuery;\nvar console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// extend objects\nfunction extend( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n}\n\nvar arraySlice = Array.prototype.slice;\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    return obj;\n  }\n\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  if ( isArrayLike ) {\n    // convert nodeList to array\n    return arraySlice.call( obj );\n  }\n\n  // array of single index\n  return [ obj ];\n}\n\n// -------------------------- imagesLoaded -------------------------- //\n\n/**\n * @param {Array, Element, NodeList, String} elem\n * @param {Object or Function} options - if function, use as callback\n * @param {Function} onAlways - callback function\n */\nfunction ImagesLoaded( elem, options, onAlways ) {\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n  if ( !( this instanceof ImagesLoaded ) ) {\n    return new ImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  var queryElem = elem;\n  if ( typeof elem == 'string' ) {\n    queryElem = document.querySelectorAll( elem );\n  }\n  // bail if bad element\n  if ( !queryElem ) {\n    console.error( 'Bad element for imagesLoaded ' + ( queryElem || elem ) );\n    return;\n  }\n\n  this.elements = makeArray( queryElem );\n  this.options = extend( {}, this.options );\n  // shift arguments if no options set\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    extend( this.options, options );\n  }\n\n  if ( onAlways ) {\n    this.on( 'always', onAlways );\n  }\n\n  this.getImages();\n\n  if ( $ ) {\n    // add jQuery Deferred object\n    this.jqDeferred = new $.Deferred();\n  }\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( this.check.bind( this ) );\n}\n\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nImagesLoaded.prototype.options = {};\n\nImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\n/**\n * @param {Node} element\n */\nImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName == 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  var nodeType = elem.nodeType;\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\n    return;\n  }\n  var childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( var i=0; i < childImgs.length; i++ ) {\n    var img = childImgs[i];\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    var children = elem.querySelectorAll( this.options.background );\n    for ( i=0; i < children.length; i++ ) {\n      var child = children[i];\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nvar elementNodeTypes = {\n  1: true,\n  9: true,\n  11: true\n};\n\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n    return;\n  }\n  // get url inside url(\"...\")\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n  var matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    var url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nImagesLoaded.prototype.addImage = function( img ) {\n  var loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nImagesLoaded.prototype.addBackground = function( url, elem ) {\n  var background = new Background( url, elem );\n  this.images.push( background );\n};\n\nImagesLoaded.prototype.check = function() {\n  var _this = this;\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  function onProgress( image, elem, message ) {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( function() {\n      _this.progress( image, elem, message );\n    });\n  }\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  });\n};\n\nImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\n    this.jqDeferred.notify( this, image );\n  }\n  // check if completed\n  if ( this.progressedCount == this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( 'progress: ' + message, image, elem );\n  }\n};\n\nImagesLoaded.prototype.complete = function() {\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n  if ( this.jqDeferred ) {\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n    this.jqDeferred[ jqMethod ]( this );\n  }\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = this.img.src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  // check for non-zero, non-undefined naturalWidth\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n  return this.img.complete && this.img.naturalWidth;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.img, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\n// -------------------------- jQuery -------------------------- //\n\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\n  jQuery = jQuery || window.jQuery;\n  if ( !jQuery ) {\n    return;\n  }\n  // set local variable\n  $ = jQuery;\n  // $().imagesLoaded()\n  $.fn.imagesLoaded = function( options, callback ) {\n    var instance = new ImagesLoaded( this, options, callback );\n    return instance.jqDeferred.promise( $(this) );\n  };\n};\n// try making plugin\nImagesLoaded.makeJQueryPlugin();\n\n// --------------------------  -------------------------- //\n\nreturn ImagesLoaded;\n\n});\n","/**\n * matchesSelector v2.0.2\n * matchesSelector( element, '.selector' )\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n\n( function( window, factory ) {\n  /*global define: false, module: false */\n  'use strict';\n  // universal module definition\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.matchesSelector = factory();\n  }\n\n}( window, function factory() {\n  'use strict';\n\n  var matchesMethod = ( function() {\n    var ElemProto = window.Element.prototype;\n    // check for the standard method name first\n    if ( ElemProto.matches ) {\n      return 'matches';\n    }\n    // check un-prefixed\n    if ( ElemProto.matchesSelector ) {\n      return 'matchesSelector';\n    }\n    // check vendor prefixes\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\n\n    for ( var i=0; i < prefixes.length; i++ ) {\n      var prefix = prefixes[i];\n      var method = prefix + 'MatchesSelector';\n      if ( ElemProto[ method ] ) {\n        return method;\n      }\n    }\n  })();\n\n  return function matchesSelector( elem, selector ) {\n    return elem[ matchesMethod ]( selector );\n  };\n\n}));\n"]}